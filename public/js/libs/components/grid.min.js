$(function(){UI.grid.AbstractColumnManager=function(a){var b=a||{};BaseUI.apply(this,a);this.types={}};BaseUI.extend(UI.grid.AbstractColumnManager,BaseUI.Component,{constructor:UI.grid.AbstractColumnManager,typeName:"type",registerType:function(a,b){this.types[a]=b;b[this.typeName]=a},isRegistered:function(a){return this.types[a]!==undefined},get:function(a){return this.types[a]}});UI.grid.ColumnManager=new UI.grid.AbstractColumnManager});
$(function(){UI.grid.AbstractSearchForm=function(a){var b=a||{};BaseUI.apply(this,b);if(BaseUI.isEmpty(this.id))throw Error("Search ID component must not be null");if(BaseUI.isEmpty(this.url))throw Error("Search URL must not be null");UI.grid.AbstractSearchForm.superclass.constructor.call(this)};BaseUI.extend(UI.grid.AbstractSearchForm,BaseUI.Component,{intComponent:function(){},getUrl:function(){return this.url},getId:function(){return this.id},getEl:function(){return $.getCmp(this.getId())},getData:function(){}})});
$(function(){UI.grid.Column=function(a){a=a||{};this.config={};BaseUI.apply(this,a)};BaseUI.extend(UI.grid.Column,BaseUI.Component,{getGrid:function(){return this.grid},getCellEditor:function(a,b){if(BaseUI.isEmpty(a))throw Error("rowIndex number must not be null");var e=!BaseUI.isEmpty(b)?b:false,i=this.getGrid();return(e?i.getAddControl()||{}:(i.getRowItems().values()[a]||{}).controls||[])[this.getColIndex()]},getCellAdd:function(a){return this.getCellEditor(a,true)},getAction:function(a,b){return this.getCellEditor(a,
b)},setDisabled:function(a){var b=this.getGrid(),e=b.getAddControl()||{},i=e[this.getColIndex()];i.setDisabled(a);b=b.getRowItems();var f=this.getColIndex();b.each(function(j,k){e=k.controls||[];i=e[f];i.setDisabled(a)});this.disabled=a;this.grid.columns[f].disabled=a},enable:function(){this.setDisabled(false)},disable:function(){this.setDisabled(true)},hide:function(){this.hidden=true;this.grid.columns[this.getColIndex()].hidden=true},getColIndex:function(){return this.colIndex},getType:function(){return this.type},
getProperty:function(){return this.property},getConfig:function(){return this.config},setEditData:function(a){this.editData=a||[];var b=this.getGrid(),e=b.getAddControl()||{},i=e[this.getColIndex()];i.column.editData=this.editData;i.edit();b=b.getRowItems();var f=this.getColIndex();b.each(function(j,k){e=k.controls||[];i=e[f];i.column.editData=this.editData});this.grid.columns[this.getColIndex()].editData=a||[]}})});
$(function(){UI.grid.ColumnModel=function(a){a=a||{};BaseUI.apply(this,a);this.columns=BaseUI.clone(this.grid.columns)||[]};BaseUI.extend(UI.grid.ColumnModel,BaseUI.Component,{getColumnById:function(a){return(this.getGrid().getAddControl()||[])[a].getColumn()},getColumnByName:function(a){for(var b in this.columns){var e=this.columns[b];if(e.property==a)return(this.getGrid().getAddControl()||[])[b].getColumn()}return null},setColumns:function(a){this.columns=a},getColumns:function(){return this.columns},
getGrid:function(){return this.grid}})});BaseUI.ns("UI.grid.DataSource");
(function(a,b){a.DataSource=b();a.UI.grid.DataSource=a.DataSource})(this,function(){var a=function(b){this._formatter=b.formatter;this._columns=b.columns||[];this._delay=b.delay||0;this._filterProp=b.filterProperty;this._idProp=b.idProperty;this._store=new Hashtable};a.prototype={setIdProperty:function(b){this._idProp=b},getIdProperty:function(){return this._idProp},columns:function(){return this._columns},getStore:function(){return this._store},setData:function(b){b=b||[];var e=this,i=e.getStore();
i.clear();_.filter(b,function(f){if(BaseUI.isEmpty(f[e.getIdProperty()]))f[e.getIdProperty()]=BaseUI.generateId().toString();i.put(f[e.getIdProperty()].toString(),f)})},getData:function(){return this.getStore().values()},insert:function(b){var e=b||{};if(BaseUI.isEmpty(e[this.getIdProperty()]))e[this.getIdProperty()]=BaseUI.generateId().toString();this.getStore().put(e[this.getIdProperty()].toString(),e)},remove:function(b){var e=b.toString().split(";");b=this.getStore();for(var i=0,f=0;f<e.length;f++)if(b.remove(e[f]))i+=
1;return i},update:function(b){var e=this.getStore(),i=b||{};return e.put(i[this.getIdProperty()].toString(),i)},count:function(){return this.getStore().size()},data:function(b,e){var i=this,f=!BaseUI.isEmpty(b.count);b.pageSize=b.pageSize||10;setTimeout(function(){var j=$.extend(true,[],i.getData());if(b.search)j=_.filter(j,function(w){var y=false;_.each(w,function(z){if(_.isString(z)||_.isFinite(z))if(z.toString().toLowerCase().indexOf(b.search.toLowerCase())!==-1)y=true});return y});if(b.filter)j=
_.filter(j,function(w){if(b.filter.value==w[i._filterProp])return true;else if(b.filter.value=="")return true;return false});var k=f?b.count:j.length;if(b.sortProperty){j=_.sortBy(j,b.sortProperty);b.sortDirection==="desc"&&j.reverse()}var n=b.pageIndex*b.pageSize,p=n+b.pageSize,s=p>k?k:p,r=Math.ceil(k/b.pageSize),u=b.pageIndex+1,t=n+1;if(!f){j=j.slice(n,p);i._formatter&&i._formatter(j)}e({data:j,start:t,end:s,count:k,pages:r,page:u})},this._delay)}};return a});
$(function(){UI.grid.Editor=function(a){a=a||{};BaseUI.apply(this,a)};BaseUI.extend(UI.grid.Editor,BaseUI.Component,{getData:function(){},isLoaded:function(){return this.getEl().data("loaded")},setLoaded:function(a){this.getEl().data("loaded",a)},setDisabled:function(a){this.getEl().prop("disabled",a)},getDisabled:function(){return this.getEl().prop("disabled")},setValue:function(){},getValue:function(){return null},getColumn:function(){return this.column},render:function(){},edit:function(){},insert:function(a){return this.edit(a)},
focus:function(){this.getEl().focus()},setEl:function(a){var b=this.getCell();if(this.getCell()){b.empty();this.$cell=b.append(a);this.$el=a;return this.$cell}},getEl:function(){return this.$el},getCell:function(){return this.$cell.length>0?this.$cell:$(this.getEl().get(0)).parent()},getRow:function(){return this.getCell().parent()},getRecordId:function(){return this.getRow().attr("data-id")},getRecord:function(){return this.getGrid().getById(this.getRecordId())},getGrid:function(){return this.grid},
isValid:function(a){var b=a||this.getValue(),e=this.getColumn(),i=e.validate||BaseUI.emptyFn,f=i(b),j=BaseUI.isEmpty(f);j?this.clearError():this.setError(f);return j},setError:function(a){var b=this.getEl();b.addClass("tooltip-error error").attr("title",a);b.tooltip()},clearError:function(){var a=this.getEl();a.removeClass("tooltip-error error").attr("title","");a.tooltip("destroy")},setIndexOfRow:function(a){this.rowIndex=a},getIndexOfRow:function(){return this.rowIndex}})});
$(function(){UI.Grid=function(a){a=a||{};this.prefix=a.prefix?a.prefix:a.id;this.id=this.id||"grid";BaseUI.apply(this,{displayMsg:this.displayMsg||"Displaying <b>{0}</b> - <b>{1}</b> of <b>{2}</b>",emptyMsg:this.emptyMsg||"No data to display",beforePageText:this.beforePageText||"Page",afterPageText:this.afterPageText||"of {0}",firstText:this.firstText||"First Page",prevText:this.prevText||"Previous Page",nextText:this.nextText||"Next Page",lastText:this.lastText||"Last Page",refreshText:this.refreshText||
"Refresh",searchText:this.searchText||"Search",searchPlaceholder:this.searchPlaceholder||"Keyword",downloadText:this.downloadText||"Download"});BaseUI.apply(this,a);this.prefix=this.prefix?this.prefix+"-":"";this.containerId=String.format("#{0}",this.id);this.gridId=String.format("#{0}-table-main",this.id);this.options=a;this.options.dataOptions={pageIndex:this.pageIndex||0,pageSize:this.pageSize||BaseUI.pageSize||10,count:this.total,sortDirection:this.sortDirection,sortProperty:this.sortProperty};
this.options.addable=BaseUI.isBoolean(this.options.addable)?this.options.addable:false;this.options.editable=BaseUI.isBoolean(this.options.editable)?this.options.editable:false;this.options.offFocus=BaseUI.isBoolean(this.options.offFocus)?this.options.offFocus:false;this.options.loadingHTML='<div class="progress progress-striped active" style="width:50%;margin:auto;"><div class="bar progress-bar progress-bar-success" style="width:100%;"></div></div>';this.options.itemsText=this.itemsText;this.options.itemText=
this.itemText;this.element=this.gridId;this.store=new Hashtable;this.onSave=this.onSave||BaseUI.emptyFn;this.onUpdate=this.onUpdate||BaseUI.emptyFn;this.firstLoad=!BaseUI.isEmpty(this.firstLoad)?this.firstLoad:true;this.disabled=!BaseUI.isEmpty(this.disabled)?this.disabled:false;this.hidden=!BaseUI.isEmpty(this.hidden)?this.hidden:false;this.height=!BaseUI.isEmpty(this.height)?this.height+"px":"auto";this.enableSelection=!BaseUI.isEmpty(this.enableSelection)?this.enableSelection:false;this.remotePaging=
!BaseUI.isEmpty(this.remotePaging)?this.remotePaging:false;this.hideSearch=!BaseUI.isEmpty(this.hideSearch)?this.hideSearch:false;this.hideHeader=!BaseUI.isEmpty(this.hideHeader)?this.hideHeader:false;this.autoHideAdv=!BaseUI.isEmpty(this.autoHideAdv)?this.autoHideAdv:false;this.allowUpdate=this.allowSave=false;this.allowDownload=!BaseUI.isEmpty(this.allowDownload)?this.allowDownload:false;this.stretchHeight=!BaseUI.isEmpty(this.stretchHeight)?this.stretchHeight:false;this.basicSearch=this.basicSearch?
this.basicSearch:null;this.advanceSearch=this.advanceSearch?this.advanceSearch:null;this.rowClass=BaseUI.isFunction(this.rowClass)?this.rowClass:null;this.moveLastOnInsert=!BaseUI.isEmpty(this.moveLastOnInsert)?this.moveLastOnInsert:false;this.rowItems=new Hashtable;this.listUpdate=[];this.pageProperty=this.pageProperty||"pageNumber";this.version="2.0";var b=this,e=this.getEl();e.addClass("fuelux");this.$basicSearch=[];this.$advanceSearch=[];if(this.basicSearch&&BaseUI.isFunction(this.basicSearch)){this.quickSearch=
new this.basicSearch;this.quickSearch.keydownEnabled=!BaseUI.isEmpty(this.quickSearch.keydownEnabled)?this.quickSearch.keydownEnabled:true;this.quickSearch.search=BaseUI.isFunction(this.search)?this.search:function(){b.setParams(b.quickSearch.getData());b.setUrl(b.quickSearch.getUrl()||b.quickSearch.url);b.reload()};this.$basicSearch=$("#"+this.quickSearch.getId()||this.quickSearch.id);this.$basicSearch.find("div:first").prop("id",this.quickSearch.getId())}if(this.advanceSearch&&BaseUI.isFunction(this.advanceSearch)){this.advSearch=
new this.advanceSearch;this.advSearch.keydownEnabled=!BaseUI.isEmpty(this.advSearch.keydownEnabled)?this.advSearch.keydownEnabled:true;this.$advanceSearch=$("#"+this.advSearch.getId()||this.advSearch.id);this.advSearch.search=this.search&&BaseUI.isFunction(this.search)?this.search:function(){b.setParams(b.advSearch.getData());b.setUrl(b.advSearch.getUrl()||b.advSearch.url);b.reload()}}(function(){var f=String.format('<table id="{0}-grid-header" class="table datagrid grid-header hidden-480 {1}">',
b.id,b.hideHeader?"xhide":"");f+='<thead><tr><th><div class="col-xs-12 col-md-12 row-fluid nopadding">';if(!b.hideSearch){f+='<div class="datagrid-header-left nopadding col-md-7 col-xs-7 span6">';if(b.$basicSearch.length>0){f+=b.$basicSearch.html();b.$basicSearch.remove()}else{f+='<div class="col-xs-6 col-md-6 span6 nopadding" style="max-height: 30px;"><span class="input-group search" style="margin-left:0px;width: 250px">';f+='<span class="input-group-btn">';f+=String.format('<input type="text" class="grid-search-input form-control" placeholder="{0}">',
b.searchPlaceholder);f+='<button type="button" class="btn btn-default grid-search-btn"><i class="icon-search"></i></button></span></span></div>'}f+="</div>"}var j=b.hideSearch?"col-xs-12 col-md-12 span12":"col-md-5 col-xs-5 span6",k=b.hideSearch?"hidden-320":"hidden-767";f+=String.format('<div class="datagrid-header-right hidden-320 nopadding {0}">',j);f+=String.format('<span class="paging {0}">',k);f+=String.format(b.displayMsg,'<span class="grid-start">0</span>','<span class="grid-end">0</span>',
'<span class="grid-count">0</span>&nbsp;</span>');f+=String.format('<button type="button" class="btn grid-firstpage first" title="{0}"><i class="icon-step-backward"></i></button>',b.firstText);f+=String.format('<button type="button" class="btn grid-prevpage" title="{0}"><i class="icon-chevron-left"></i></button>',b.prevText);f+=String.format('<input class="grid-page" type="text" />');f+=String.format('<button type="button" class="btn grid-nextpage" title="{0}"><i class="icon-chevron-right"></i></button>',
b.nextText);f+=String.format('<button type="button" class="btn grid-lastpage" title="{0}"><i class="icon-step-forward"></i></button>',b.lastText);if(b.allowDownload)f+=String.format('<button type="button" class="btn grid-download" title="{0}"><i class="icon-download-alt"></i></button>',b.downloadText);f+=String.format('<button type="button" class="btn grid-refresh last" title="{0}"><i class="icon-refresh"></i></button>',b.refreshText);f+="</div>";f+="</div></th></tr></thead></table>";var n=String.format('<div style="height: {1}; width: 100%;background-color: #F9F9F9;">',
b.id,b.height);n+=String.format('<table id="{0}-table-main" class="table table-bordered datagrid grid table-striped">',b.id);n+="<colgroup></colgroup><thead></thead></table></div>";e.html(f+n)})();if(this.quickSearch){this.quickSearch.intComponent(this);a=e.find("#"+this.quickSearch.getId());var i=a.find("[data-expand-hide=true]");a.find("[data-action-search]").click(function(){switch($(this).attr("data-action-search")){case "expand":i.hide();b.$advanceSearch.show(0,function(){b.fireEvent("expandadvance",
b.advSearch,b.quickSearch)});break;case "search":b.quickSearch.search()}});this.quickSearch.keydownEnabled&&a.off("keydown","input").on("keydown","input",function(f){(f.keyCode?f.keyCode:f.which)==13&&b.quickSearch.search()})}if(this.advSearch){this.advSearch.intComponent(this);this.$advanceSearch.find("[data-action-search]").click(function(){switch($(this).attr("data-action-search")){case "close":i.show();b.$advanceSearch.hide(0,function(){b.fireEvent("closeadvance",b.advSearch,b.quickSearch)});
break;case "search":b.advSearch.search();if(b.autoHideAdv){i.show();b.$advanceSearch.hide(0,function(){b.fireEvent("closeadvance",b.advSearch,b.quickSearch)})}}});this.advSearch.keydownEnabled&&this.$advanceSearch.off("keydown","input").on("keydown","input",function(f){(f.keyCode?f.keyCode:f.which)==13&&b.search()})}this.$element=$(this.element);this.$colgroup=this.$element.find("colgroup");this.$thead=this.$element.find("thead");this.$topheader=this.$element.find("thead th");this.$pagingContent=
$(String.format("#{0}-grid-header",this.id));this.$searchcontrol=this.$pagingContent.find(".search");this.$filtercontrol=this.$pagingContent.find(".filtering");this.$prevpagebtn=this.$pagingContent.find(".grid-prevpage");this.$nextpagebtn=this.$pagingContent.find(".grid-nextpage");this.$pageinput=this.$pagingContent.find("input.grid-page");this.$firstpagebtn=this.$pagingContent.find(".grid-firstpage");this.$lastpagebtn=this.$pagingContent.find(".grid-lastpage");this.$refreshbtn=this.$pagingContent.find(".grid-refresh");
this.$downloadbtn=this.$pagingContent.find(".grid-download");this.$pageslabel=this.$pagingContent.find(".grid-pages");this.$countlabel=this.$pagingContent.find(".grid-count");this.$startlabel=this.$pagingContent.find(".grid-start");this.$endlabel=this.$pagingContent.find(".grid-end");this.$tbody=$("<tbody>").insertAfter(this.getHeader());this.$colheader=$("<tr>").appendTo(this.getHeader());this.dataSource&&this.dataSource.setIdProperty(this.getIdProperty());this.columns=this.dataSource?this.dataSource.columns():
[];this.sm=null;this.resized=false;this.$pageinput.height(18);this.$pageinput.on("change",$.proxy(this.pageChanged,this));this.$nextpagebtn.on("click",$.proxy(this.next,this));this.$prevpagebtn.on("click",$.proxy(this.previous,this));this.$firstpagebtn.on("click",$.proxy(this.first,this));this.$lastpagebtn.on("click",$.proxy(this.last,this));this.$refreshbtn.on("click",$.proxy(this.load,this));this.$downloadbtn.on("click",$.proxy(this.download,this));this.$searchcontrol.on("searched cleared",$.proxy(this.searchChanged,
this));this.$filtercontrol.on("changed",$.proxy(this.filterChanged,this));this.$colheader.on("click","th",$.proxy(this.headerClicked,this));this.$element.on("loaded",function(){b.isEdit()&&b.editAll();b.isAdd()&&b.newRecord();if(b.enableSelection){b.sm=new UI.grid.CheckboxSelection({grid:b});b.sm.on("selectionchange",function(f,j){b.fireEvent("selectionchange",f,j)})}else b.sm=new UI.grid.ClickSelection;if(!b.resized){b.fireEvent("resize",b);b.resized=true}b.fireEvent("loaded",b.getStore())});this.renderColumns();
if(this.stretchHeight){this.initStretchHeight();$(window).resize(function(){b.fireEvent("resize",b)})}if(this.firstLoad){if(this.quickSearch){this.setParams(this.quickSearch.getData());this.setUrl(this.quickSearch.getUrl()||this.quickSearch.url)}else if(BaseUI.isEmpty(this.url))throw Error("Missing url");this.load()}else{if(!BaseUI.isEmpty(this.url)||!BaseUI.isEmpty(this.data))this.loadData(BaseUI.isFunction(this.data)?this.data():this.data||[]);this.isAdd()&&this.newRecord()}this.hidden&&this.hide()};
BaseUI.extend(UI.Grid,UI.Component,{constructor:UI.Grid,version:"2.1",setDataSource:function(a){this.dataSource=a;this.dataSource.setIdProperty(this.getIdProperty());this.columns=this.dataSource.columns();this.getColumnModel().setColumns(this.columns);this.renderColumns();this.renderData()},loadData:function(a){var b=a||[];if(this.dataSource!=null){this.dataSource.setData(b);this.renderData()}},clearData:function(){if(this.dataSource!=null){this.options.dataOptions.count=null;this.dataSource.setData([]);
this.renderData()}return true},_initHeader:function(){var a="",b="",e=$('<tr onclick="javascript:;" data-action="new" style="display:none"></tr>'),i=this.getColumnModel().getColumns();this.$topheader.attr("colspan",i.length);this.addControls=[];for(var f=0;f<i.length;f++){var j=i[f]||{},k=j.cls||"",n=BaseUI.isNumber(j.width)?j.width+"px":"auto";if(j.type=="action"){var p=j.buttons||[],s=p.length*40+"px";a+=String.format('<col style="width:{0}" class="{1}"/>',s,k)}else a+=String.format('<col style="width:{0}" class="{1}" />',
n,k);if(j.type=="selection"){this.enableSelection=true;b+=String.format('<th style="text-align:center;vertical-align:middle" class="{0}"><label><input style="width:auto;display: inline;" type="checkbox" class="ace"/><span class="lbl"></span></label></th>',k)}else{b+=String.format('<th data-property="{0}" class="{1} {2}" style="max-width: {3}"',j.property||"",j.sortable?"sortable":"",k,n);b+=">"+(j.label||"")+"</th>"}var r=j.align||"left",u=$(String.format('<td class="newrecord {1}" style="text-align:{0};vertical-align:middle;"></td>',
r,k)),t=null,w=BaseUI.clone(j);w.grid=this;w.colIndex=f;w={grid:this,column:new UI.grid.Column(w),$cell:u};if(j.editor){t=new j.editor(w);t.insert()}else{var y=null;if(y=UI.grid.ColumnManager.isRegistered(j.type)?UI.grid.ColumnManager.get(j.type):UI.grid.ColumnManager.get("label")){t=new y(w);t.insert()}}this.addControls.push(t);e.append(u)}return{$thead:e,colHTML:b,colGroup:a}},_switchView:function(a){var b=a||{},e=this.getColumnModel().getColumns(),i=b[this.getIdProperty()].toString();a=this.findRowById(i);
var f=this.getRowItems().get(i);if(f){var j=f.controls||[];for(f=0;f<j.length;f++){var k=j[f];if(BaseUI.isObject(k)){var n=k.getColumn();if(n){var p=b[n.getProperty()];p=!BaseUI.isEmpty(p)?p:n.value;k.getCell().removeClass("editable");var s=!BaseUI.isEmpty(p)?p:"";if(!BaseUI.isEmpty(n.renderer)&&BaseUI.isFunction(n.renderer))p=n.renderer(s,b,f);k.render(p,b);var r=this.rowClass?this.rowClass(b):"";k.setIndexOfRow(a.index());k.getRow().attr("class",r)}}}}else{a.empty();var u=[];j=[];for(f=0;f<e.length;f++){k=
e[f];var t=k.align||"left",w=k.valign||"top",y=k.cls||"",z=$(String.format('<td style="text-align:{0};vertical-align:{1}" class="{2}">',t,w,y));p=b[k.property];var A=BaseUI.clone(k);A.grid=this;A.colIndex=f;var x=null;A={grid:this,column:new UI.grid.Column(A),$cell:z};if(k.editor){x=new k.editor(A);x.setIndexOfRow(a.index()||f);x.render(p)}else{s=!BaseUI.isEmpty(p)?p:"";if(!BaseUI.isEmpty(k.renderer)&&BaseUI.isFunction(k.renderer))p=k.renderer(s,b,f);if(k=UI.grid.ColumnManager.isRegistered(k.type)?
UI.grid.ColumnManager.get(k.type):UI.grid.ColumnManager.get("label")){x=new k(A);x.setIndexOfRow(a.index());x.render(p,b)}}x&&u.push(x);r=this.rowClass?this.rowClass(b):"";a.attr("class",r);j.push(z)}a.append(j);this.rowItems.put(i.toString(),{rowIndex:a.index(),controls:u})}this.removeListenerOutsideEvent(a)},_switchEdit:function(a){var b=a||{},e=b[this.getIdProperty()].toString();a=this.findRowById(e);for(var i=(this.getRowItems().get(e)||{}).controls||[],f=false,j=0;j<i.length;j++){var k=i[j];
if(BaseUI.isObject(k)){var n=k.getColumn();if(n){var p=b[n.getProperty()];p=!BaseUI.isEmpty(p)?p:n.value;if(!BaseUI.isEmpty(n.renderer)&&BaseUI.isFunction(n.renderer))p=n.renderer(p,b,j);var s=k.getCell();s.empty();s.addClass("editable");s.append(k.edit(p));if(!f&&n.type!="selection"){k.focus();f=true}}}}this.fireEvent("beforeedit",b,a.index());this.listenerOutsideEvent(a)},getAddControl:function(){return this.addControls},getRowItems:function(){return this.rowItems},renderColumns:function(){var a=
this._initHeader(),b=a.$thead;this.$colgroup.html(a.colGroup);this.getHeader().parent().find("colgroup").html(a.colGroup);this.$colheader.html(a.colHTML);this.getHeader().find("tr:gt(0)").remove();this.getHeader().append(b);BaseUI.isEmpty(this.options.dataOptions.sortProperty)||this.updateColumns(this.getHeader().find(String.format('th[data-property="{0}"]:last',this.options.dataOptions.sortProperty)),this.options.dataOptions.sortDirection)},addEvent:function(){var a=this;this.$element.trigger("loaded");
a.$tbody.off("click","tr[data-id] td:not([data-action])").on("click","tr[data-id] td:not([data-action])",function(){var b=$($(this).parent()),e=b.attr("data-id"),i=$(this).hasClass("editable");if(!BaseUI.isEmpty(e)){var f=a.store.get(e)||{},j=a.getSelectionModel();if(a.enableSelection)b.hasClass("selected")||j.checkedRow(b,true);else{if(b.hasClass("selected")){b.removeClass("selected");j.clearSelection()}else{a.$tbody.find("tr[data-id]").removeClass("selected");b.addClass("selected");j.setSelection([f])}a.fireEvent("selectionchange",
j,f)}a.hasEvent("click")&&a.fireEvent("click",f,i,$(this))}})},updateColumns:function(a,b){var e=b==="asc"?"icon-chevron-up":"icon-chevron-down";this.$colheader.find("i").remove();this.$colheader.find("th").removeClass("sorted");$("<i>").addClass(e).appendTo(a);a.addClass("sorted")},updatePageButtons:function(a){this.paging=a||{};var b=a.page<=1,e=a.page>=a.pages||a.count<1;this.$prevpagebtn.prop("disabled",b);this.$nextpagebtn.prop("disabled",e);this.$firstpagebtn.prop("disabled",b);this.$lastpagebtn.prop("disabled",
e);this.$downloadbtn.prop("disabled",a.count<1)},_switchEditAll:function(){var a=this,b=this.getStore();b.each(function(e,i){a._switchEdit(i)});this.refreshSelection()},_switchViewAll:function(){var a=this;this.rowItems.clear();var b=this.getStore();b.each(function(e,i){a._switchView(i)});this.refreshSelection()},refreshSelection:function(){var a=this.getSelectionModel();a&&this.enableSelection&&a.clearSelected()},renderData:function(a){this.fireEvent("beforeload",this);var b=this,e=a||BaseUI.emptyFn;
this._setAllowUpdate(false);this.store.clear();this.getBody().html(this.placeholderRowHTML(this.options.loadingHTML));var i="";this.dataSource.data(this.options.dataOptions,function(f){if(b.options.dataOptions.pageIndex>f.page)b.options.dataOptions.pageIndex=0;b.$pageslabel.text(f.pages);b.$countlabel.text(f.count);if(f.count<1){b.$startlabel.text(0);b.$pageinput.val(0).prop("disabled",true)}else{b.$startlabel.text(f.start);b.$pageinput.val(b.options.dataOptions.pageIndex+1).prop("disabled",false)}b.$endlabel.text(f.end);
b.updatePageButtons(f);var j=f.data||[];for(f=0;f<j.length;f++){var k=j[f]||{},n=k[b.getIdProperty()];b.store.put(n.toString(),k);k[b.getIdProperty()]=n;i+=String.format('<tr onclick="javascript:;" data-id="{0}"></tr>',n)}i||(i=b.placeholderRowHTML(b.emptyMsg));b.$tbody.html(i);b._switchViewAll();b.stretchHeightFn();b.addEvent();e()})},placeholderRowHTML:function(a){var b=0;b=this.isVisible()?this.getHeader().find("tr:first").find("th:visible").length:this.columns.length;b=b<1?this.columns.length:
b;return String.format('<tr><td style="padding:10px;border-bottom:none;" colspan="{0}"><i>{1}</i></td></tr>',b,a)},headerClicked:function(a){a=$(a.target);if(a.hasClass("sortable")){var b=this.options.dataOptions.sortDirection,e=this.options.dataOptions.sortProperty,i=a.data("property");if(e===i)this.options.dataOptions.sortDirection=b==="asc"?"desc":"asc";else{this.options.dataOptions.sortDirection="asc";this.options.dataOptions.sortProperty=i}if(!this.remotePaging)this.options.dataOptions.pageIndex=
0;this.updateColumns(a,this.options.dataOptions.sortDirection);this.renderData()}},sort:function(a,b){this.options.dataOptions.sortProperty=a;this.options.dataOptions.sortDirection=b||"asc";this.updateColumns(this.getHeader().find(String.format('th[data-property="{0}"]:last',a)),this.options.dataOptions.sortDirection);this.renderData()},pagesizeChanged:function(a,b){this.options.dataOptions.pageSize=b?parseInt(b.value,10):parseInt($(a.target).val(),10);this.options.dataOptions.pageIndex=0;this.renderData()},
pageChanged:function(a){a=$(a.target);var b=parseInt(a.val(),10)||1;b=BaseUI.isEmpty(b)?1:b;var e=this.paging.pages;this.options.dataOptions.pageIndex=b>e?e-1:b-1;a.val(this.options.dataOptions.pageIndex+1);if(this.remotePaging){var i=this.getParams();i[this.getPageProperty()]=this.options.dataOptions.pageIndex;this.setParams(i);this.load()}else this.renderData()},searchChanged:function(a,b){this.options.dataOptions.search=b;this.options.dataOptions.pageIndex=0;this.renderData()},filterChanged:function(a,
b){this.options.dataOptions.filter=b;this.renderData()},goPage:function(a){var b=a||0;this.options.dataOptions.pageIndex=b;if(this.remotePaging){var e=this.getParams();if(!BaseUI.isEmpty(e))e[this.getPageProperty()]=this.options.dataOptions.pageIndex;this.setParams(e);this.load()}else this.renderData()},previous:function(){if(!(this.paging.page<=1)){this.options.dataOptions.pageIndex--;this.goPage(this.options.dataOptions.pageIndex)}},next:function(){if(!(this.paging.page>=this.paging.pages)){this.options.dataOptions.pageIndex++;
this.goPage(this.options.dataOptions.pageIndex)}},first:function(){this.goPage(0)},last:function(){this.goPage(this.paging.pages-1)},reload:function(){this.options.dataOptions.pageIndex=0;this.load()},initStretchHeight:function(){this.$gridContainer=this.$element.parent();var a="border-left: 0px;border-right: 0px;border-bottom:0px;";if(BaseUI.isGecko)a="border-left-color: transparent;border-right-color: transparent;border-bottom-color:transparent;";this.$element.wrap(String.format('<div class="datagrid-stretch-wrapper" style="overflow-x:auto;overflow-y:scroll;{0}">',
a));this.$stretchWrapper=this.$element.parent();this.$headerTable=$("<table>").attr("class",this.$element.attr("class"));this.$headerTable.append(this.$colgroup.clone());this.$headerTable.prependTo(this.$gridContainer).addClass("datagrid-stretch-header");this.getHeader().detach().appendTo(this.$headerTable);$(this.$headerTable).wrap(String.format('<div style="margin-right:{0}px;overflow: hidden;border-right: 1px solid transparent;" />',$.getScrollBarWidth()));var b=this.$pagingContent.width()+"px";
if(BaseUI.isGecko){this.$headerTable.css({width:b,"table-layout":"fixed","border-color":"transparent"});this.$headerTable.find("th:first,td:first").css({"border-left-color":"transparent"});this.$headerTable.find("th:last").css({"border-right-color":"transparent"})}else{this.$headerTable.css({width:b,"table-layout":"fixed",border:"0px"});this.$headerTable.find("th:first,td:first").css({"border-left-color":"transparent"})}this.$element.css({width:b,"table-layout":"fixed"});this.$pagingContent.css({"border-bottom":"1px solid #DDD"});
this.getEl().attr("style","border:1px solid #DDD;");this.$sizingHeader=this.getHeader().clone();this.$sizingHeader.find("tr:first").remove();this.$stretchWrapper.scroll(function(){$(this.$headerTable.parent()).get(0).scrollLeft=this.$stretchWrapper.get(0).scrollLeft}.createDelegate(this));$(this.$headerTable.parent()).scroll(function(){$(this.$headerTable.parent()).get(0).scrollLeft=this.$stretchWrapper.get(0).scrollLeft}.createDelegate(this))},stretchHeightFn:function(){if(this.$gridContainer){var a=
this.$gridContainer.height(),b=this.$headerTable.outerHeight();this.$stretchWrapper.height(a-b-(this.isAdd()?20:0))}},disable:function(){this.setDisabled(true)},enable:function(){this.setDisabled(false)},setDisabled:function(a){this.disabled=!!a;this.getEl().find("input,select,button").prop("disabled",this.disabled)},isDisabled:function(){return this.disabled},hide:function(){this.setVisible(false)},show:function(){this.setVisible(true)},setVisible:function(a){(this.hidden=!a)?this.getEl().hide():
this.getEl().show()},isVisible:function(){return!this.hidden&&this.getEl().is(":visible")},save:function(a){var b={},e=(a||"").toString();if(BaseUI.isEmpty(e)){a=this.getAddControl();var i={};for(f=0;f<a.length;f++){j=a[f];if(!BaseUI.isEmpty(j.column)){k=j.getColumn();if(!BaseUI.isEmpty(k.getProperty())){n=j.getValue();if(j.isValid(n))i[k.getProperty()]=n;else{j.focus();return}}}}this.hasEvent("save")?this.fireEvent("save",i):this.onSave(i);this._setAllowSave(false)}else{a=this.getRowItems().get(e).controls;
for(var f=0;f<a.length;f++){var j=a[f];if(!BaseUI.isEmpty(j)){var k=j.getColumn();if(!BaseUI.isEmpty(k.getProperty())){var n=j.getValue();if(j.isValid(n))b[k.getProperty()]=n;else{j.focus();return}}}}var p=this.getById(e);b[this.getIdProperty()]=p[this.getIdProperty()];this.hasEvent("update")?this.fireEvent("update",b,p):this.onUpdate(b,p);this._setAllowUpdate(false)}},findRowById:function(a){if(!BaseUI.isEmpty(a)){var b=a.toString().split(";"),e=[];for(a=0;a<b.length;a++)e.push(String.format('tr[data-id="{0}"]',
b[a]));return this.getBody().find(e.join(","))}},selectById:function(a,b){var e=this.findRowById(a),i=this.getSelectionModel();if(this.enableSelection)i.checkedRow(e,b);else{var f=this.getById(a);if(!e.hasClass("selected")){this.getBody().find("tr[data-id]").removeClass("selected");e.addClass("selected")}i.setSelection([f]);this.fireEvent("selectionchange",i,f)}},changeCell:function(a){if(!a)throw Error("Editor must not be null");var b=a.getRecordId(),e={},i={};this._setAllowUpdate(!BaseUI.isEmpty(b));
if(BaseUI.isEmpty(b))for(var f=this.getAddControl(),j=0;j<f.length;j++){var k=f[j];if(!BaseUI.isEmpty(k.column)){var n=k.getColumn();if(!BaseUI.isEmpty(n.getProperty())){var p=k.getValue();if(k.isValid(p))e[n.getProperty()]=p;else{k.focus();return}}}}else{f=this.getRowItems().get(b.toString()).controls;for(j=0;j<f.length;j++){k=f[j];if(!BaseUI.isEmpty(k)){n=k.getColumn();if(!BaseUI.isEmpty(n.getProperty())){p=k.getValue();if(k.isValid(p))e[n.getProperty()]=p;else{k.focus();return}}}}i=this.getById(b);
e[this.getIdProperty()]=i[this.getIdProperty()]}this.fireEvent("change",i,e,a.getColumn().getColIndex(),a.getRow().index())},clickCell:function(a){a&&this.fireEvent("controlclick",a.getRecord(),a.getColumn().getColIndex(),a.getRow().index())},endEdit:function(){BaseUI.isEmpty(this.currentEditId)||this.save(this.currentEditId)},cancelEdit:function(){BaseUI.isEmpty(this.currentEditId)||this.cancel(this.currentEditId)},getHeader:function(){return this.$thead},getNewRow:function(){return this.getHeader().find('tr[data-action="new"]')},
newRecord:function(a){var b=a||{};this.setAddable(true);this._setAllowSave(true);a=this.getAddControl();var e=this.getNewRow();e.show();for(var i=false,f=0;f<a.length;f++){var j=a[f];if(!BaseUI.isEmpty(j.column)){var k=j.getColumn(),n=b[k.getProperty()];n=!BaseUI.isEmpty(n)?n:k.value;j.setValue(!BaseUI.isEmpty(n)?n:"");j.clearError();if(!i&&k.type!="selection"){j.focus();i=true}}}this.disabled&&this.disable();this.listenerOutsideEvent(e);this.stretchHeightFn()},hideNewRecord:function(){this.getNewRow().hide();
this.setAddable(false);this._setAllowSave(false);this.stretchHeightFn()},isValid:function(){return true},insert:function(a){var b=a||{},e=this,i=this.getById(b[this.getIdProperty()]);if(!i){this.dataSource.insert(b);if(this.remotePaging)BaseUI.isEmpty(this.getTotal())?this.setTotal(null):this.setTotal((this.getTotal()||0)+1);else this.remotePaging||this.setTotal(null);this.moveLastOnInsert?this.renderData(function(){e.fireEvent("insert",i);e.last()}):this.renderData(function(){e.fireEvent("insert",
i)});return true}return false},update:function(a){var b=a||{},e=this.dataSource.update(b);if(e){this.getStore().put(b[this.getIdProperty()].toString(),b);this.listUpdate.push(b);return true}return false},commit:function(){for(var a=[],b=0;b<this.listUpdate.length;b++){var e=this.listUpdate[b]||{};this._switchView(e);this.refreshSelection();a.push(e[this.getIdProperty()])}this.getSelectionModel().refresh();a.length>0&&this.selectById(a.join(";"),false);this.listUpdate=[]},getById:function(a){var b=
a||"";if(!BaseUI.isEmpty(b))return this.store.get(b.toString())},getStore:function(){return this.store},remove:function(a){var b=a||"",e=this,i=false;if(BaseUI.isEmpty(b))return i;var f=this.dataSource.remove(b);this.remotePaging&&this.setTotal(this.dataSource.count());this.renderData(function(){e.getSelectionModel().clearSelected()});return!!f},clear:function(){this.clearData()},edit:function(a){var b=a||"";if(!BaseUI.isEmpty(b)){this.currentEditId=b;this._switchEdit(this.getById(b));this.refreshSelection();
var e=this.findRowById(b);this.disabled&&this.disable();this.selectById(a,true);return e}},cancel:function(a){var b=a||"";if(BaseUI.isEmpty(b))this.hideNewRecord();else{this._setAllowUpdate(false);this._switchView(this.getById(b));this.refreshSelection();return true}},load:function(){var a=this,b=this.getParams()||{};this.getBody().html(this.placeholderRowHTML(this.options.loadingHTML));if(this.dataSource){this.$pagingContent.show();a.fireEvent("beforesubmit",b);BaseUI.isEmpty(a.url)?a.renderData():
$.postJSON(a.url,b,function(e){var i=e||{},f=BaseUI.isFunction(a.convertData)?a.convertData(i):i.elements;a.dataSource.setData(f||[]);a.renderData()},{mask:this.containerId,msg:UI.resources.ajaxLoading?UI.resources.ajaxLoading.loading:"Loading"})}else{this.getBody().html(a.placeholderRowHTML(a.emptyMsg));this.$pagingContent.hide()}},download:function(){this.fireEvent("download",this.getParams(),this)},setPageIndex:function(a){this.options.dataOptions.pageIndex=a||0},getPageIndex:function(){return this.options.dataOptions.pageIndex},
getPageSize:function(){return this.options.dataOptions.pageSize},setTotal:function(a){this.options.dataOptions.count=a},getTotal:function(){return this.options.dataOptions.count},setParams:function(a){this.params=a||{}},getParams:function(){return this.params},setUrl:function(a){this.url=a||""},getUrl:function(){return this.url},getBody:function(){return this.$tbody},isEdit:function(){return this.options.editable},hasEdit:function(){return this.getBody().find("td").hasClass("editable")},setEditable:function(a){this.options.editable=
a},isAdd:function(){return this.options.addable},setAddable:function(a){this.options.addable=a},editAll:function(){this.setEditable(true);this._switchEditAll();this.disabled&&this.enable();return true},cancelEditAll:function(){this.setEditable(false);this._switchViewAll();return true},setHeight:function(a){if(this.$gridContainer){this.$gridContainer.height(a);this.stretchHeightFn()}},getSelectionModel:function(){return this.sm},getColumnModel:function(){if(!this._cm)this._cm=new UI.grid.ColumnModel({grid:this});
return this._cm},getEl:function(){return $(this.containerId)},getMask:function(){return this.getEl()},getIdProperty:function(){return this.options.idProperty||"uuid"},getQuickSearch:function(){return this.quickSearch},getAdvanceSearch:function(){return this.advSearch},getPageProperty:function(){return this.pageProperty},_checkSaveRecord:function(){var a=this.getNewRow();if(this.isAdd()&&this.isAllowSave()){a.data("allowSave",false);this.fireEvent("blur","save",this)}else a.data("allowSave",true);
this.removeListenerOutsideEvent(a);this.hideNewRecord()},_checkUpdateRecord:function(){this.isAllowUpdate()&&this.fireEvent("blur","update",this);this._setAllowUpdate(false)},_setAllowSave:function(a){this.allowSave=!!a;this.getNewRow().data("allowSave",this.allowSave)},isAllowSave:function(){return this.allowSave},_setAllowUpdate:function(a){this.allowUpdate=!!a},isAllowUpdate:function(){return this.allowUpdate},removeListenerOutsideEvent:function(a){return a.unbind("clickoutside focusoutside")},
listenerOutsideEvent:function(a){var b=this,e=!BaseUI.isEmpty(a.data("allowSave"));return function(){a.unbind("clickoutside").bind("clickoutside",function(i){if(a.index()<0)a.unbind("clickoutside");else{i.preventDefault();i.stopPropagation();e?b._checkSaveRecord():b._checkUpdateRecord()}});a.unbind("focusoutside").bind("focusoutside",function(i){if(a.index()<0)a.unbind("focusoutside");else{i.preventDefault();i.stopPropagation();e?b._checkSaveRecord():b._checkUpdateRecord()}});return a}.defer(250)},
fireAction:function(a,b){this.fireEvent("event",a,b)}})});
(function(a){var b=function(e,i){this.$element=a(e);this.options=a.extend({},a.fn.search.defaults,i);this.$button=this.$element.find("button").on("click",a.proxy(this.buttonclicked,this));this.$input=this.$element.find("input").on("keydown",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keypressed,this));this.$icon=this.$element.find("i");this.activeSearch=""};b.prototype={constructor:b,search:function(e){this.$icon.attr("class","icon-remove");this.activeSearch=e;this.$element.trigger("searched",
e)},clear:function(){this.$icon.attr("class","icon-search");this.activeSearch="";this.$input.val("");this.$element.trigger("cleared")},action:function(){var e=this.$input.val(),i=e===""||e===this.activeSearch;if(this.activeSearch&&i)this.clear();else e&&this.search(e)},buttonclicked:function(e){e.preventDefault();a(e.currentTarget).is(".disabled, :disabled")||this.action()},keypress:function(e){e.which===13&&e.preventDefault()},keypressed:function(e){if(e.which===13){e.preventDefault();this.action()}else{e=
(e=this.$input.val())&&e===this.activeSearch;this.$icon.attr("class",e?"icon-remove":"icon-search")}},disable:function(){this.$input.attr("disabled","disabled");this.$button.addClass("disabled")},enable:function(){this.$input.removeAttr("disabled");this.$button.removeClass("disabled")}};a.fn.search=function(e){return this.each(function(){var i=a(this),f=i.data("search"),j=typeof e==="object"&&e;f||i.data("search",f=new b(this,j));typeof e==="string"&&f[e]()})};a.fn.search.defaults={};a.fn.search.Constructor=
b;a(function(){a("body").on("mousedown.search.data-api",".search",function(){var e=a(this);e.data("search")||e.search(e.data())})});UI.grid.Search=function(e){e=e||{};BaseUI.apply(this,e)};BaseUI.extend(UI.grid.Search,BaseUI.Component,{intComponent:function(){},getUrl:function(){return this.url},getId:function(){return this.id},getEl:function(){return a.getCmp(this.getId())},hide:function(){this.getEl().hide()},show:function(){this.getEl().show()},getData:function(){return{}}})})(window.jQuery);
$(function(){UI.grid.CheckboxSelection=function(a){a=a||{};this.prefix="";BaseUI.apply(this,a);this.store=this.grid.getStore();this.query=function(){this.$rowSelector=this.grid.$tbody.find("tr[data-id]");this.$checkboxSelector=this.grid.$tbody.find("td[data-action=select] input[type=checkbox]");this.$checkAll=this.grid.$thead.find("input[type=checkbox]:first");this.$columnCheck=this.grid.$tbody.find("td[data-action=select]")};this.query();var b=this,e=function(i,f,j){i=$(i);f?i.addClass("selected"):
i.removeClass("selected");if(j)b.fireEvent("selectionchange",b,b.getSelection());else{f=b.$rowSelector.find(b.$checkboxSelector).parent().find("input[type=checkbox]:checked").length;b.$checkAll.prop("checked",b.getCount()>0&&b.getCount()==f);b.fireEvent("selectionchange",b,b.getSelected())}};this.grid.$tbody.off("click","td[data-action=select] input[type=checkbox]").on("click","td[data-action=select] input[type=checkbox]",function(i){i.stopPropagation();i=$(this).is(":checked");var f=$($(this).parent().parent().parent().get(0));
e(f,i)});this.$checkAll.off("click").on("click",function(){var i=$(this).is(":checked");b.$rowSelector.find(b.$checkboxSelector).prop("checked",i);e(b.$rowSelector,i,true)});this.$columnCheck.off("click").on("click",function(i){var f=$(this).closest("tr").find("input:checkbox").get(0);if(i.target!=f){$(f).prop("checked",!$(f).is(":checked"));e($(this).parent(),!!$(f).is(":checked"));i.stopPropagation()}});this.$rowSelector.find(this.$checkboxSelector).parent().find("input[type=checkbox]:checked").parent().parent().parent().addClass("selected");
this.$checkAll.prop("checked",false)};BaseUI.extend(UI.grid.CheckboxSelection,BaseUI.Component,{getCount:function(){return this.$rowSelector.find(this.$checkboxSelector).length},getSelected:function(){var a=this.$rowSelector.find(this.$checkboxSelector).parent().find("input[type=checkbox]:checked");if(a.length>0){a=$(a[0]).parent().parent().parent().data("id");if(!BaseUI.isEmpty(a))return this.store.get(a.toString())}return null},getSelection:function(){for(var a=[],b=this.$rowSelector.find(this.$checkboxSelector).parent().find("input[type=checkbox]:checked"),
e=0;e<b.length;e++){var i=$(b[e]).parent().parent().parent().data("id");BaseUI.isEmpty(i)||a.push(this.store.get(i.toString()))}return a},clearSelected:function(){this.$rowSelector.find(this.$checkboxSelector).prop("checked",false);this.$rowSelector.removeClass("selected");this.$checkAll.prop("checked",false);this.fireEvent("selectionchange",this,[])},checkAll:function(){this.$checkAll.prop("checked",true);this.$rowSelector.find(this.$checkboxSelector).prop("checked",true);this.$rowSelector.addClass("selected")},
checkedRow:function(a,b){if(b){this.$rowSelector.find(this.$checkboxSelector).prop("checked",false);this.$rowSelector.removeClass("selected");this.$checkAll.prop("checked",false)}a.find(this.$checkboxSelector).prop("checked",true);a.addClass("selected");this.fireEvent("selectionchange",this,this.getSelected())},refresh:function(){this.$rowSelector.find(this.$checkboxSelector).prop("checked",false);this.$rowSelector.removeClass("selected");this.$checkAll.prop("checked",false);this.query()}});UI.grid.ClickSelection=
function(a){var b=a||{};this.selections=b.selections||[]};BaseUI.extend(UI.grid.ClickSelection,BaseUI.Component,{getSelection:function(){return this.selections},setSelection:function(a){this.selections=a},getSelected:function(){if(BaseUI.isArray(this.selections))return this.selections[this.selections.length-1];return null},clearSelection:function(){this.selections=[]},clearSelected:function(){this.clearSelection()},refresh:function(){this.clearSelection()}})});
(function(){function a(c,d,h){if(c===d)return c!==0||1/c==1/d;if(c==null||d==null)return c===d;if(c._chain)c=c._wrapped;if(d._chain)d=d._wrapped;if(c.isEqual&&g.isFunction(c.isEqual))return c.isEqual(d);if(d.isEqual&&g.isFunction(d.isEqual))return d.isEqual(c);var l=p.call(c);if(l!=p.call(d))return false;switch(l){case "[object String]":return c==String(d);case "[object Number]":return c!=+c?d!=+d:c==0?1/c==1/d:c==+d;case "[object Date]":case "[object Boolean]":return+c==+d;case "[object RegExp]":return c.source==
d.source&&c.global==d.global&&c.multiline==d.multiline&&c.ignoreCase==d.ignoreCase}if(typeof c!="object"||typeof d!="object")return false;for(var m=h.length;m--;)if(h[m]==c)return true;h.push(c);m=0;var o=true;if(l=="[object Array]"){m=c.length;if(o=m==d.length)for(;m--;)if(!(o=m in c==m in d&&a(c[m],d[m],h)))break}else{if("constructor"in c!="constructor"in d||c.constructor!=d.constructor)return false;for(var q in c)if(g.has(c,q)){m++;if(!(o=g.has(d,q)&&a(c[q],d[q],h)))break}if(o){for(q in d)if(g.has(d,
q)&&!m--)break;o=!m}}h.pop();return o}var b=this,e=b._,i={},f=Array.prototype,j=Object.prototype,k=f.slice,n=f.unshift,p=j.toString,s=j.hasOwnProperty,r=f.forEach,u=f.map,t=f.reduce,w=f.reduceRight,y=f.filter,z=f.every,A=f.some,x=f.indexOf,J=f.lastIndexOf;j=Array.isArray;var N=Object.keys,E=Function.prototype.bind,g=function(c){return new C(c)};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=g;exports._=g}else b._=g;g.VERSION="1.3.3";var v=g.each=
g.forEach=function(c,d,h){if(c!=null)if(r&&c.forEach===r)c.forEach(d,h);else if(c.length===+c.length)for(var l=0,m=c.length;l<m;l++){if(l in c&&d.call(h,c[l],l,c)===i)break}else for(l in c)if(g.has(c,l))if(d.call(h,c[l],l,c)===i)break};g.map=g.collect=function(c,d,h){var l=[];if(c==null)return l;if(u&&c.map===u)return c.map(d,h);v(c,function(m,o,q){l[l.length]=d.call(h,m,o,q)});if(c.length===+c.length)l.length=c.length;return l};g.reduce=g.foldl=g.inject=function(c,d,h,l){var m=arguments.length>2;
if(c==null)c=[];if(t&&c.reduce===t){if(l)d=g.bind(d,l);return m?c.reduce(d,h):c.reduce(d)}v(c,function(o,q,B){if(m)h=d.call(l,h,o,q,B);else{h=o;m=true}});if(!m)throw new TypeError("Reduce of empty array with no initial value");return h};g.reduceRight=g.foldr=function(c,d,h,l){var m=arguments.length>2;if(c==null)c=[];if(w&&c.reduceRight===w){if(l)d=g.bind(d,l);return m?c.reduceRight(d,h):c.reduceRight(d)}var o=g.toArray(c).reverse();if(l&&!m)d=g.bind(d,l);return m?g.reduce(o,d,h,l):g.reduce(o,d)};
g.find=g.detect=function(c,d,h){var l;K(c,function(m,o,q){if(d.call(h,m,o,q)){l=m;return true}});return l};g.filter=g.select=function(c,d,h){var l=[];if(c==null)return l;if(y&&c.filter===y)return c.filter(d,h);v(c,function(m,o,q){if(d.call(h,m,o,q))l[l.length]=m});return l};g.reject=function(c,d,h){var l=[];if(c==null)return l;v(c,function(m,o,q){d.call(h,m,o,q)||(l[l.length]=m)});return l};g.every=g.all=function(c,d,h){var l=true;if(c==null)return l;if(z&&c.every===z)return c.every(d,h);v(c,function(m,
o,q){if(!(l=l&&d.call(h,m,o,q)))return i});return!!l};var K=g.some=g.any=function(c,d,h){d||(d=g.identity);var l=false;if(c==null)return l;if(A&&c.some===A)return c.some(d,h);v(c,function(m,o,q){if(l||(l=d.call(h,m,o,q)))return i});return!!l};g.include=g.contains=function(c,d){var h=false;if(c==null)return h;if(x&&c.indexOf===x)return c.indexOf(d)!=-1;return h=K(c,function(l){return l===d})};g.invoke=function(c,d){var h=k.call(arguments,2);return g.map(c,function(l){return(g.isFunction(d)?d||l:l[d]).apply(l,
h)})};g.pluck=function(c,d){return g.map(c,function(h){return h[d]})};g.max=function(c,d,h){if(!d&&g.isArray(c)&&c[0]===+c[0])return Math.max.apply(Math,c);if(!d&&g.isEmpty(c))return-Infinity;var l={computed:-Infinity};v(c,function(m,o,q){o=d?d.call(h,m,o,q):m;o>=l.computed&&(l={value:m,computed:o})});return l.value};g.min=function(c,d,h){if(!d&&g.isArray(c)&&c[0]===+c[0])return Math.min.apply(Math,c);if(!d&&g.isEmpty(c))return Infinity;var l={computed:Infinity};v(c,function(m,o,q){o=d?d.call(h,m,
o,q):m;o<l.computed&&(l={value:m,computed:o})});return l.value};g.shuffle=function(c){var d=[],h;v(c,function(l,m){h=Math.floor(Math.random()*(m+1));d[m]=d[h];d[h]=l});return d};g.sortBy=function(c,d,h){var l=g.isFunction(d)?d:function(m){return m[d]};return g.pluck(g.map(c,function(m,o,q){return{value:m,criteria:l.call(h,m,o,q)}}).sort(function(m,o){var q=m.criteria,B=o.criteria;if(q===void 0)return 1;if(B===void 0)return-1;return q<B?-1:q>B?1:0}),"value")};g.groupBy=function(c,d){var h={},l=g.isFunction(d)?
d:function(m){return m[d]};v(c,function(m,o){var q=l(m,o);(h[q]||(h[q]=[])).push(m)});return h};g.sortedIndex=function(c,d,h){h||(h=g.identity);for(var l=0,m=c.length;l<m;){var o=l+m>>1;h(c[o])<h(d)?l=o+1:m=o}return l};g.toArray=function(c){if(!c)return[];if(g.isArray(c))return k.call(c);if(g.isArguments(c))return k.call(c);if(c.toArray&&g.isFunction(c.toArray))return c.toArray();return g.values(c)};g.size=function(c){return g.isArray(c)?c.length:g.keys(c).length};g.first=g.head=g.take=function(c,
d,h){return d!=null&&!h?k.call(c,0,d):c[0]};g.initial=function(c,d,h){return k.call(c,0,c.length-(d==null||h?1:d))};g.last=function(c,d,h){return d!=null&&!h?k.call(c,Math.max(c.length-d,0)):c[c.length-1]};g.rest=g.tail=function(c,d,h){return k.call(c,d==null||h?1:d)};g.compact=function(c){return g.filter(c,function(d){return!!d})};g.flatten=function(c,d){return g.reduce(c,function(h,l){if(g.isArray(l))return h.concat(d?l:g.flatten(l));h[h.length]=l;return h},[])};g.without=function(c){return g.difference(c,
k.call(arguments,1))};g.uniq=g.unique=function(c,d,h){h=h?g.map(c,h):c;var l=[];if(c.length<3)d=true;g.reduce(h,function(m,o,q){if(d?g.last(m)!==o||!m.length:!g.include(m,o)){m.push(o);l.push(c[q])}return m},[]);return l};g.union=function(){return g.uniq(g.flatten(arguments,true))};g.intersection=g.intersect=function(c){var d=k.call(arguments,1);return g.filter(g.uniq(c),function(h){return g.every(d,function(l){return g.indexOf(l,h)>=0})})};g.difference=function(c){var d=g.flatten(k.call(arguments,
1),true);return g.filter(c,function(h){return!g.include(d,h)})};g.zip=function(){for(var c=k.call(arguments),d=g.max(g.pluck(c,"length")),h=Array(d),l=0;l<d;l++)h[l]=g.pluck(c,""+l);return h};g.indexOf=function(c,d,h){if(c==null)return-1;var l;if(h){h=g.sortedIndex(c,d);return c[h]===d?h:-1}if(x&&c.indexOf===x)return c.indexOf(d);h=0;for(l=c.length;h<l;h++)if(h in c&&c[h]===d)return h;return-1};g.lastIndexOf=function(c,d){if(c==null)return-1;if(J&&c.lastIndexOf===J)return c.lastIndexOf(d);for(var h=
c.length;h--;)if(h in c&&c[h]===d)return h;return-1};g.range=function(c,d,h){if(arguments.length<=1){d=c||0;c=0}h=arguments[2]||1;for(var l=Math.max(Math.ceil((d-c)/h),0),m=0,o=Array(l);m<l;){o[m++]=c;c+=h}return o};var L=function(){};g.bind=function(c,d){var h,l;if(c.bind===E&&E)return E.apply(c,k.call(arguments,1));if(!g.isFunction(c))throw new TypeError;l=k.call(arguments,2);return h=function(){if(!(this instanceof h))return c.apply(d,l.concat(k.call(arguments)));L.prototype=c.prototype;var m=
new L,o=c.apply(m,l.concat(k.call(arguments)));if(Object(o)===o)return o;return m}};g.bindAll=function(c){var d=k.call(arguments,1);if(d.length==0)d=g.functions(c);v(d,function(h){c[h]=g.bind(c[h],c)});return c};g.memoize=function(c,d){var h={};d||(d=g.identity);return function(){var l=d.apply(this,arguments);return g.has(h,l)?h[l]:h[l]=c.apply(this,arguments)}};g.delay=function(c,d){var h=k.call(arguments,2);return setTimeout(function(){return c.apply(null,h)},d)};g.defer=function(c){return g.delay.apply(g,
[c,1].concat(k.call(arguments,1)))};g.throttle=function(c,d){var h,l,m,o,q,B,M=g.debounce(function(){q=o=false},d);return function(){h=this;l=arguments;var O=function(){m=null;q&&c.apply(h,l);M()};m||(m=setTimeout(O,d));if(o)q=true;else B=c.apply(h,l);M();o=true;return B}};g.debounce=function(c,d,h){var l;return function(){var m=this,o=arguments;h&&!l&&c.apply(m,o);clearTimeout(l);l=setTimeout(function(){l=null;h||c.apply(m,o)},d)}};g.once=function(c){var d=false,h;return function(){if(d)return h;
d=true;return h=c.apply(this,arguments)}};g.wrap=function(c,d){return function(){var h=[c].concat(k.call(arguments,0));return d.apply(this,h)}};g.compose=function(){var c=arguments;return function(){for(var d=arguments,h=c.length-1;h>=0;h--)d=[c[h].apply(this,d)];return d[0]}};g.after=function(c,d){if(c<=0)return d();return function(){if(--c<1)return d.apply(this,arguments)}};g.keys=N||function(c){if(c!==Object(c))throw new TypeError("Invalid object");var d=[],h;for(h in c)if(g.has(c,h))d[d.length]=
h;return d};g.values=function(c){return g.map(c,g.identity)};g.functions=g.methods=function(c){var d=[],h;for(h in c)g.isFunction(c[h])&&d.push(h);return d.sort()};g.extend=function(c){v(k.call(arguments,1),function(d){for(var h in d)c[h]=d[h]});return c};g.pick=function(c){var d={};v(g.flatten(k.call(arguments,1)),function(h){if(h in c)d[h]=c[h]});return d};g.defaults=function(c){v(k.call(arguments,1),function(d){for(var h in d)if(c[h]==null)c[h]=d[h]});return c};g.clone=function(c){if(!g.isObject(c))return c;
return g.isArray(c)?c.slice():g.extend({},c)};g.tap=function(c,d){d(c);return c};g.isEqual=function(c,d){return a(c,d,[])};g.isEmpty=function(c){if(c==null)return true;if(g.isArray(c)||g.isString(c))return c.length===0;for(var d in c)if(g.has(c,d))return false;return true};g.isElement=function(c){return!!(c&&c.nodeType==1)};g.isArray=j||function(c){return p.call(c)=="[object Array]"};g.isObject=function(c){return c===Object(c)};g.isArguments=function(c){return p.call(c)=="[object Arguments]"};if(!g.isArguments(arguments))g.isArguments=
function(c){return!!(c&&g.has(c,"callee"))};g.isFunction=function(c){return p.call(c)=="[object Function]"};g.isString=function(c){return p.call(c)=="[object String]"};g.isNumber=function(c){return p.call(c)=="[object Number]"};g.isFinite=function(c){return g.isNumber(c)&&isFinite(c)};g.isNaN=function(c){return c!==c};g.isBoolean=function(c){return c===true||c===false||p.call(c)=="[object Boolean]"};g.isDate=function(c){return p.call(c)=="[object Date]"};g.isRegExp=function(c){return p.call(c)=="[object RegExp]"};
g.isNull=function(c){return c===null};g.isUndefined=function(c){return c===void 0};g.has=function(c,d){return s.call(c,d)};g.noConflict=function(){b._=e;return this};g.identity=function(c){return c};g.times=function(c,d,h){for(var l=0;l<c;l++)d.call(h,l)};g.escape=function(c){return(""+c).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};g.result=function(c,d){if(c==null)return null;var h=c[d];return g.isFunction(h)?
h.call(c):h};g.mixin=function(c){v(g.functions(c),function(d){P(d,g[d]=c[d])})};var Q=0;g.uniqueId=function(c){var d=Q++;return c?c+d:d};g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/.^/,D={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},G;for(G in D)D[D[G]]=G;var R=/\\|'|\r|\n|\t|\u2028|\u2029/g,S=/\\(\\|'|r|n|t|u2028|u2029)/g,H=function(c){return c.replace(S,function(d,h){return D[h]})};g.template=function(c,
d,h){h=g.defaults(h||{},g.templateSettings);c="__p+='"+c.replace(R,function(m){return"\\"+D[m]}).replace(h.escape||F,function(m,o){return"'+\n_.escape("+H(o)+")+\n'"}).replace(h.interpolate||F,function(m,o){return"'+\n("+H(o)+")+\n'"}).replace(h.evaluate||F,function(m,o){return"';\n"+H(o)+"\n;__p+='"})+"';\n";h.variable||(c="with(obj||{}){\n"+c+"}\n");c="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+c+"return __p;\n";var l=new Function(h.variable||"obj","_",c);
if(d)return l(d,g);d=function(m){return l.call(this,m,g)};d.source="function("+(h.variable||"obj")+"){\n"+c+"}";return d};g.chain=function(c){return g(c).chain()};var C=function(c){this._wrapped=c};g.prototype=C.prototype;var I=function(c,d){return d?g(c).chain():c},P=function(c,d){C.prototype[c]=function(){var h=k.call(arguments);n.call(h,this._wrapped);return I(d.apply(g,h),this._chain)}};g.mixin(g);v(["pop","push","reverse","shift","sort","splice","unshift"],function(c){var d=f[c];C.prototype[c]=
function(){var h=this._wrapped;d.apply(h,arguments);var l=h.length;if((c=="shift"||c=="splice")&&l===0)delete h[0];return I(h,this._chain)}});v(["concat","join","slice"],function(c){var d=f[c];C.prototype[c]=function(){return I(d.apply(this._wrapped,arguments),this._chain)}});C.prototype.chain=function(){this._chain=true;return this};C.prototype.value=function(){return this._wrapped}}).call(this);
$(function(){BaseUI.ns("UI.grid.column.ActionButton");UI.grid.Button=function(a){a=a||{};BaseUI.apply(this,a)};BaseUI.extend(UI.grid.Button,BaseUI.Component,{getEl:function(){return $(this.$el)},hide:function(){this.getEl().hide()},show:function(){this.getEl().show()},setVisible:function(a){a?this.getEl().show():this.getEl().hide()}});UI.grid.column.ActionButton=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.ActionButton.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.ActionButton,
UI.grid.Editor,{render:function(a,b){var e=this.getColumn();if(BaseUI.isObject(e)){var i=e.separate||"&nbsp;",f=e.buttons||[],j=b||{},k=$("<div></div>");if(BaseUI.isArray(f))for(var n=0;n<f.length;n++){var p=f[n];p.id="btn-"+BaseUI.generateId();var s=p.visibled||function(){return true},r=s(j),u=p.labelCls!=undefined?p.labelCls:"label label-info";r||(u+=" hide");var t=$(String.format('<span title="{1}" class="{2}"><i class="{0} icon-white"/></span>',p.icon,p.text,u));k.append(t);t.on("click",function(){f[$(this).index()].fn(j)});
!BaseUI.isEmpty(i)&&n!=f.length-1&&k.append(i)}this.getCell().attr("data-action","click").width("auto");this.setEl(k);return this.getEl()}},insert:function(){var a=this.getColumn(),b=a.separate||"&nbsp;",e=$("<div></div>"),i=$(String.format('<span title="Add" class="label label-success" style="cursor: pointer"><i class="icon-plus icon-white"/></span>')),f=$(String.format('<span title="Cancel" class="label label-important" style="cursor: pointer"><i class="icon-remove"/></span>'));e.append(i).append(b).append(f);
i.on("click",function(){this.getGrid().save()}.createDelegate(this));f.on("click",function(){this.getGrid().cancel()}.createDelegate(this));this.getCell().width(65);this.setEl(e);return this.getEl()},edit:function(){var a=this.getColumn(),b=a.separate||"&nbsp;",e=$("<div></div>"),i=$(String.format('<span title="Update" class="label label-success"><i class="icon-ok icon-white"/></span>')),f=$(String.format('<span title="Cancel" class="label label-important"><i class="icon-remove"/></span>'));e.append(i).append(b).append(f);
i.on("click",function(){this.getGrid().save(this.getRecordId())}.createDelegate(this));f.on("click",function(){this.getGrid().cancel(this.getRecordId())}.createDelegate(this));this.getCell().width(65);this.setEl(e);return this.getEl()},get:function(a){var b="action-column-id"+a;this[b]||(this[b]=new UI.grid.Button({$el:this.getEl().find("span").get(a)}));return this[b]}});UI.grid.ColumnManager.registerType("action",UI.grid.column.ActionButton)});
$(function(){BaseUI.ns("UI.grid.column.Checkbox");UI.grid.column.Checkbox=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.Checkbox.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.Checkbox,UI.grid.Editor,{render:function(a){(BaseUI.isBoolean(a)?a:false)||a=="1"?this.setEl($('<label><input style="width:auto;display: inline;" class="ace" type="checkbox" checked="checked" disabled="disabled"/><span class="lbl"></span></label>')):this.setEl($('<label><input style="width:auto;display: inline;" class="ace" type="checkbox" disabled="disabled"/><span class="lbl"></span></label>'));
return this.getEl()},edit:function(a){var b=this.getColumn(),e=b.disabled?'disabled="disabled"':"",i=null;i=(BaseUI.isBoolean(a)?a:false)||a=="1"?$(String.format('<label><input {0} style="width:auto;display: inline;" class="ace"type="checkbox" checked="checked"/><span class="lbl"></span></label>',e)):$(String.format('<label><input {0} style="width:auto;display: inline;" class="ace" type="checkbox"/><span class="lbl"></span></label>',e));var f=this.getGrid();i.on("change",function(){f.changeCell(this)}.createDelegate(this));
this.setEl(i);return this.getEl()},getValue:function(){var a=this.getEl().find("input");return a.length>0?a.is(":checked"):null},setValue:function(a){var b=this.getEl().find("input"),e=(BaseUI.isBoolean(a)?a:false)||a=="1";b.prop("disabled",false).prop("checked",e)},focus:function(){this.getEl().find("input").focus()}});UI.grid.ColumnManager.registerType("checkbox",UI.grid.column.Checkbox)});
$(function(){BaseUI.ns("UI.grid.column.checkboxgroup");UI.grid.column.CheckboxGroup=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.CheckboxGroup.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.CheckboxGroup,UI.grid.Editor,{render:function(a){var b=this.getColumn(),e=b.editData||[],i=b.valueField||"value",f=b.displayField||"text",j=a||[],k="";for(a=0;a<e.length;a++)k+=j.indexOf(e[a][i])>-1?String.format('<li><i class="ace icon-ok blue"></i> {0}</li>',e[a][f]):String.format('<li style="text-decoration: line-through;  color: #8090A0;"><i class="ace icon-remove red"></i> {0}</li>',
e[a][f]);this.setEl($(String.format('<ul style=" margin-left: 0px ;padding-left: 0;   list-style: none;">{0}</ul>',k)));return this.getEl()},__renderChbx:function(a,b,e,i){return String.format('<label><input value = "{0}" {1} {2} type="checkbox" class="ace"><span class="lbl"> {3}</span></label>',a,e?"checked":"",i?"disabled":"",b)},edit:function(a){var b=this.getColumn(),e=b.editData||[],i=b.valueField||"value",f=b.displayField||"text",j=b.disabled?'disabled="disabled"':"",k=a||[],n="";for(a=0;a<
e.length;a++)n+=this.__renderChbx(e[a][i],e[a][f],k.indexOf(e[a][i])>-1,j);e=$(String.format("<div class='checked'>{0}</div>",n));var p=this.getGrid();e.on("change",function(){p.changeCell(this)}.createDelegate(this));this.setEl(e);return this.getEl()},getValue:function(){for(var a=this.getEl().find("input"),b=[],e=0;e<a.length;e++)$(a[e]).is(":checked")&&b.push($(a[e]).val());return b},setValue:function(a){var b=this.getEl().find("input"),e=(BaseUI.isBoolean(a)?a:false)||a=="1";b.prop("disabled",
false).prop("checked",e)},focus:function(){this.getEl().find("input").focus()}});UI.grid.ColumnManager.registerType("checkboxgroup",UI.grid.column.CheckboxGroup)});
$(function(){BaseUI.ns("UI.grid.column.Label");UI.grid.column.Label=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.Label.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.Label,UI.grid.Editor,{render:function(a){this.setEl($(String.format("<span>{0}</span>",!BaseUI.isEmpty(a)?a:"")));return this.getEl()},edit:function(a){return this.render(a)},getValue:function(){return this.getEl().length>0?this.getEl().html():null},setValue:function(a){this.getEl().html(!BaseUI.isEmpty(a)?
a:"")},focus:function(){this.getRow().find("input:first").focus()}});UI.grid.ColumnManager.registerType("label",UI.grid.column.Label)});
$(function(){BaseUI.ns("UI.grid.column.Select");UI.grid.column.Select=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.Select.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.Select,UI.grid.Editor,{render:function(a){var b=this.getColumn(),e=b.editData||[],i=b.valueField||"value",f=b.displayField||"text",j=BaseUI.isObject(a)?a[f]:"";a=BaseUI.isObject(a)?a[i]:a;for(var k=0;k<e.length;k++){var n=e[k]||{};if(n[i]==a){j=n[f];break}}this.setEl($(String.format("<span>{0}</span>",j||
a)));return this.getEl()},edit:function(a){var b=this.getColumn(),e=b.disabled?'disabled="disabled"':"",i=b.editData||[],f=[],j=b.valueField||"value",k=b.displayField||"text",n=b.emptyString||"----------",p=!BaseUI.isEmpty(b.forceSelection)?b.forceSelection:true,s=BaseUI.isObject(a)?a[k]:"";a=BaseUI.isObject(a)?a[j]:a;var r=null,u=this.getGrid();r=false;p||f.push(String.format('<option value="">{0}</option>',n));for(n=0;n<i.length;n++){var t=i[n]||{};if(t[j]==a){f.push(String.format('<option selected value="{0}">{1}</option>',
t[j],t[k]));r=true}else f.push(String.format('<option value="{0}">{1}</option>',t[j],t[k]))}if(!r&&!BaseUI.isEmpty(a))f.splice(0,0,String.format('<option selected value="{0}">{1}</option>',a,s||a));r=b.type=="select2"?$(String.format('<select {0} data-type="select2" style="width:100%">',e)+f.join()+"<select/>"):$(String.format('<select data-type="select" {0}>',e)+f.join()+"<select/>");r.on("change",function(){u.changeCell(this)}.createDelegate(this));b.type=="select"&&r.on("click",function(){u.clickCell(this)}.createDelegate(this));
this.setEl(r);a=this.applyUI();b.type=="select2"&&a&&a&&a.on("select2-opening",function(){u.clickCell(this)}.createDelegate(this));return this.getEl()},applyUI:function(){var a=this.getColumn()||{};if(a.type=="select2"){if(!this.getEl())throw Error("$cell must not be null");try{if($.fn.select2)return this.getEl().select2(a.getConfig()||{});else console.error("select2 plugin could not be found")}catch(b){throw Error(b.message);}}},getValue:function(){var a=this.getColumn(),b=this.getEl();switch(a.type){case "select":var e=
a.valueField||"value";b=b.val();if(a.dataType=="object")for(var i=a.editData||[],f=0;f<i.length;f++){var j=i[f];if(j[e]==b)b=j}return b;case "select2":if(b.length>0)try{return b.select2("val")}catch(k){throw Error(k.message);}return null}},setValue:function(a){var b=this.getColumn(),e=this.getEl();switch(b.type){case "select":e.find("select").val(a);break;case "select2":e.select2("val",a)}},focus:function(){this.getEl().select2("focus")}});UI.grid.ColumnManager.registerType("select",UI.grid.column.Select);
UI.grid.ColumnManager.registerType("select2",UI.grid.column.Select)});
$(function(){BaseUI.ns("UI.grid.column.Selection");UI.grid.column.Selection=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.Selection.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.Selection,UI.grid.Editor,{render:function(){var a=this.getColumn(),b=a.disabled?'disabled="disabled"':"";this.setEl($(String.format('<label><input {0} type="checkbox" class="ace"/><span class="lbl"></span></label></td>',b)));this.getCell().addClass(a.cls).attr("data-action","select").css("text-align",
a.align||"center");return this.getEl()},edit:function(){this.setEl($('<i class="icon-certificate"></i>'));return this.getEl()}});UI.grid.ColumnManager.registerType("selection",UI.grid.column.Selection)});
$(function(){BaseUI.ns("UI.grid.column.Selectx");UI.grid.column.Selectx=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.Selectx.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.Selectx,UI.grid.Editor,{render:function(a){var b=this.getColumn(),e=b.displayField||"text";if(BaseUI.isObject(a)&&!BaseUI.isArray(a)){a=a[e]||"";this.setEl($(String.format("<span>{0}</span>",a)))}else if(BaseUI.isArray(a)){for(var i=[],f=0;f<a.length;f++){var j=a[f]||{};i.push(j[e])}this.setEl($(String.format("<span>{0}</span>",
i.join(","))))}else this.setEl($(String.format("<span>{0}</span>",a)));return this.getEl()},edit:function(a){var b=this.getColumn(),e=b.disabled?'disabled="disabled"':"",i=b.valueField||"value";if(BaseUI.isObject(a)&&!BaseUI.isArray(a))a=a[i]||"";else if(BaseUI.isArray(a)){for(var f=[],j=0;j<a.length;j++){var k=a[j]||{};f.push(k[i])}a=f.join(",")}else a=a||"";a=$(String.format('<input value="{0}" style="width:100%" data-type="selectx" {1} />',a,e));var n=this.getGrid();a.on("change",function(){n.changeCell(this)}.createDelegate(this));
this.setEl(a);(a=this.applyUI())&&a.on("select2-opening",function(){n.clickCell(this)}.createDelegate(this));return this.getEl()},applyUI:function(){if(!this.getEl())throw Error("$cell must not be null");var a=this.getColumn().getConfig()||{};try{if($.fn.select2)return this.getEl().select2(a);else console.error("select2 plugin could not be found")}catch(b){throw Error(b.message);}},getValue:function(){var a=this.getEl();return a.length>0?a.select2("val"):null},setValue:function(a){var b=this.getEl(),
e=this.getColumn(),i=e.valueField||"value";if(BaseUI.isObject(a)&&!BaseUI.isArray(a))a=a[i]||"";else if(BaseUI.isArray(a)){for(var f=[],j=0;j<a.length;j++){var k=a[j]||{};f.push(k[i])}a=f.join(",")}else a=a||"";b.select2("val",a)},focus:function(){this.getEl().select2("focus")}});UI.grid.ColumnManager.registerType("selectx",UI.grid.column.Selectx)});
$(function(){BaseUI.ns("UI.grid.column.Textbox");UI.grid.column.Textbox=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.Textbox.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.Textbox,UI.grid.Editor,{render:function(a){this.setEl($(String.format("<span>{0}</span>",!BaseUI.isEmpty(a)?a:"")));return this.getEl()},edit:function(a){a=!BaseUI.isEmpty(a)?a:"";var b=this.getColumn(),e=b.align||"left",i=b.disabled?'disabled="disabled"':"";a=$(String.format('<input value="{0}" {1} style="text-align:{2}"/>',
a,i,e));var f=this.getGrid();a.on("keydown",function(j){j=j.keyCode?j.keyCode:j.which;var k=this.getRecordId();if(j==13)f.save(k);else j==27&&f.cancel(k)}.createDelegate(this));a.on("change",function(){f.changeCell(this)}.createDelegate(this));this.setEl(a);return this.getEl()},getValue:function(){var a=this.getEl();return a.length>0?a.val():null},setValue:function(a){this.getEl().val(!BaseUI.isEmpty(a)?a:"")}});UI.grid.ColumnManager.registerType("text",UI.grid.column.Textbox)});
$(function(){BaseUI.ns("UI.grid.column.TypeAhead");UI.grid.column.TypeAhead=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.TypeAhead.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.TypeAhead,UI.grid.Editor,{render:function(a){this.setEl($(String.format("<span>{0}</span>",!BaseUI.isEmpty(a)?a:"")));return this.getEl()},edit:function(a){a=!BaseUI.isEmpty(a)?a:"";var b=this.getColumn(),e=b.align||"left",i=b.disabled?'disabled="disabled"':"",f=$(String.format('<input value="{0}" {1} style="text-align:{2}"/>',
a,i,e)),j=this.getGrid();f.on("keydown",function(k){k=k.keyCode?k.keyCode:k.which;var n=this.getRecordId();if(k==13&&!f.data("typeahead").shown)j.save(n);else k==27&&j.cancel(n)}.createDelegate(this));f.on("change",function(){j.changeCell(this)}.createDelegate(this));this.setEl(f);this.applyUI();return this.getEl()},applyUI:function(){var a=this.getColumn()||{};if(a.type=="typeahead"){if(!this.getEl())throw Error("$cell must not be null");try{if($.fn.typeahead)return this.getEl().typeahead({source:a.editData});
else console.error("Typeahead plugin could not be found")}catch(b){throw Error(b.message);}}},getValue:function(){var a=this.getEl();return a.length>0?a.val():null},setValue:function(a){this.getEl().val(!BaseUI.isEmpty(a)?a:"")}});UI.grid.ColumnManager.registerType("typeahead",UI.grid.column.TypeAhead)});
(function(a,b,e){function i(f,j){function k(s){a(n).each(function(){var r=a(this);this!==s.target&&!r.has(s.target).length&&r.triggerHandler(j,[s.target])})}j=j||f+e;var n=a(),p=f+"."+j+"-special-event";a.event.special[j]={setup:function(){n=n.add(this);n.length===1&&a(b).bind(p,k)},teardown:function(){n=n.not(this);n.length===0&&a(b).unbind(p)},add:function(s){var r=s.handler;s.handler=function(u,t){u.target=t;r.apply(this,arguments)}}}}a.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "),
function(f){i(f)});i("focusin","focus"+e);i("focusout","blur"+e);a.addOutsideEvent=i})(jQuery,document,"outside");