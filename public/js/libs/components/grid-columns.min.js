$(function(){BaseUI.ns("UI.grid.column.ActionButton");UI.grid.Button=function(a){a=a||{};BaseUI.apply(this,a)};BaseUI.extend(UI.grid.Button,UI.Component,{getEl:function(){return $(this.$el)},hide:function(){this.getEl().hide()},show:function(){this.getEl().show()},setVisible:function(a){a?this.getEl().show():this.getEl().hide()}});UI.grid.column.ActionButton=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.ActionButton.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.ActionButton,
UI.grid.Editor,{render:function(a,b){var c=this.getColumn();if(BaseUI.isObject(c)){var e=c.separate||"&nbsp;",d=c.buttons||[],f=b||{},g=$("<div></div>");if(BaseUI.isArray(d))for(var h=0;h<d.length;h++){var k=d[h];k.id="btn-"+BaseUI.generateId();var m=k.visibled||function(){return true},i=m(f),l=k.labelCls!=undefined?k.labelCls:"label label-info";i||(l+=" hide");var j=$(String.format('<span title="{1}" class="{2}"><i class="{0} icon-white"/></span>',k.icon,k.text,l));g.append(j);j.on("click",function(){d[$(this).index()].fn(f)});
!BaseUI.isEmpty(e)&&h!=d.length-1&&g.append(e)}this.getCell().attr("data-action","click").width("auto");this.setEl(g);return this.getEl()}},insert:function(){var a=this.getColumn(),b=a.separate||"&nbsp;",c=$("<div></div>"),e=$(String.format('<span title="Add" class="label label-success" style="cursor: pointer"><i class="fa fa-plus icon-white"/></span>')),d=$(String.format('<span title="Cancel" class="label label-important" style="cursor: pointer"><i class="fa fa-remove"/></span>'));c.append(e).append(b).append(d);
e.on("click",function(){this.getGrid().save()}.createDelegate(this));d.on("click",function(){this.getGrid().cancel()}.createDelegate(this));this.getCell().width(65);this.setEl(c);return this.getEl()},edit:function(){var a=this.getColumn(),b=a.separate||"&nbsp;",c=$("<div></div>"),e=$(String.format('<span title="Update" class="label label-success"><i class="fa fa-check icon-white"/></span>')),d=$(String.format('<span title="Cancel" class="label label-important"><i class="fa fa-remove"/></span>'));
c.append(e).append(b).append(d);e.on("click",function(){this.getGrid().save(this.getRecordId())}.createDelegate(this));d.on("click",function(){this.getGrid().cancel(this.getRecordId())}.createDelegate(this));this.getCell().width(65);this.setEl(c);return this.getEl()},get:function(a){var b="action-column-id"+a;this[b]||(this[b]=new UI.grid.Button({$el:this.getEl().find("span").get(a)}));return this[b]}});UI.grid.ColumnManager.registerType("action",UI.grid.column.ActionButton)});
$(function(){BaseUI.ns("UI.grid.column.Checkbox");UI.grid.column.Checkbox=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.Checkbox.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.Checkbox,UI.grid.Editor,{render:function(a){(BaseUI.isBoolean(a)?a:false)||a=="1"?this.setEl($('<label><input style="width:auto;display: inline;" class="ace" type="checkbox" checked="checked" disabled="disabled"/><span class="lbl"></span></label>')):this.setEl($('<label><input style="width:auto;display: inline;" class="ace" type="checkbox" disabled="disabled"/><span class="lbl"></span></label>'));
return this.getEl()},edit:function(a){var b=this.getColumn(),c=b.disabled?'disabled="disabled"':"",e=null;e=(BaseUI.isBoolean(a)?a:false)||a=="1"?$(String.format('<label><input {0} style="width:auto;display: inline;" class="ace"type="checkbox" checked="checked"/><span class="lbl"></span></label>',c)):$(String.format('<label><input {0} style="width:auto;display: inline;" class="ace" type="checkbox"/><span class="lbl"></span></label>',c));var d=this.getGrid();e.on("change",function(){d.changeCell(this)}.createDelegate(this));
this.setEl(e);return this.getEl()},getValue:function(){var a=this.getEl().find("input");return a.length>0?a.is(":checked"):null},setValue:function(a){var b=this.getEl().find("input"),c=(BaseUI.isBoolean(a)?a:false)||a=="1";b.prop("disabled",false).prop("checked",c)},focus:function(){this.getEl().find("input").focus()}});UI.grid.ColumnManager.registerType("checkbox",UI.grid.column.Checkbox)});
$(function(){BaseUI.ns("UI.grid.column.checkboxgroup");UI.grid.column.CheckboxGroup=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.CheckboxGroup.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.CheckboxGroup,UI.grid.Editor,{render:function(a){var b=this.getColumn(),c=b.editData||[],e=b.valueField||"value",d=b.displayField||"text",f=a||[],g="";for(a=0;a<c.length;a++)g+=f.indexOf(c[a][e])>-1?String.format('<li><i class="ace icon-ok blue"></i> {0}</li>',c[a][d]):String.format('<li style="text-decoration: line-through;  color: #8090A0;"><i class="ace icon-remove red"></i> {0}</li>',
c[a][d]);this.setEl($(String.format('<ul style=" margin-left: 0px ;padding-left: 0;   list-style: none;">{0}</ul>',g)));return this.getEl()},__renderChbx:function(a,b,c,e){return String.format('<label><input value = "{0}" {1} {2} type="checkbox" class="ace"><span class="lbl"> {3}</span></label>',a,c?"checked":"",e?"disabled":"",b)},edit:function(a){var b=this.getColumn(),c=b.editData||[],e=b.valueField||"value",d=b.displayField||"text",f=b.disabled?'disabled="disabled"':"",g=a||[],h="";for(a=0;a<
c.length;a++)h+=this.__renderChbx(c[a][e],c[a][d],g.indexOf(c[a][e])>-1,f);c=$(String.format("<div class='checked'>{0}</div>",h));var k=this.getGrid();c.on("change",function(){k.changeCell(this)}.createDelegate(this));this.setEl(c);return this.getEl()},getValue:function(){for(var a=this.getEl().find("input"),b=[],c=0;c<a.length;c++)$(a[c]).is(":checked")&&b.push($(a[c]).val());return b},setValue:function(a){var b=this.getEl().find("input"),c=(BaseUI.isBoolean(a)?a:false)||a=="1";b.prop("disabled",
false).prop("checked",c)},focus:function(){this.getEl().find("input").focus()}});UI.grid.ColumnManager.registerType("checkboxgroup",UI.grid.column.CheckboxGroup)});
$(function(){BaseUI.ns("UI.grid.column.InputFileUpload");UI.grid.column.InputFileUpload=function(a){var b=a||{};BaseUI.apply(this,b);this.isChange=false;UI.grid.column.InputFileUpload.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.InputFileUpload,UI.grid.Editor,{render:function(a){if(a){var b=this.getColumn(),c=b.multiple||false,e=b.idField||"uuid",d=b.displayField||"file",f=b.nameField||"name",g='<ul class="list-unstyled">';if(c){if(BaseUI.isArray(a))for(var h=0;h<BaseUI.getSize(a);h++)g+=
String.format('<li class="text-primary" data-code="{0}" data-name="{1}">{2}</li>',a[h][e],a[h][f],a[h][d])}else g+=String.format('<li class="text-primary" data-code="{0}" data-name="{1}">{2}</li>',a[0][e],a[0][f],a[0][d]);this.setEl($(String.format("<span>{0}</ul></span>",g)));return this.getEl()}else this.getCell().html("<i>Ch\u01b0a \u0111\u00ednh k\u00e8m t\u1eadp tin</i>")},edit:function(a){var b=this,c=this.getColumn(),e=c.multiple||false,d=c.idField||"uuid",f=c.displayField||"file",g=c.nameField||
"name",h=c.acceptFile||".zip",k=c.onChange||BaseUI.emptyFn,m='<i data-action="delete" data-type="file" class="ace-icon fa fa-times red"></i>',i='<ul class="list-unstyled">';if(a)if(e){if(BaseUI.isArray(a))for(var l=0;l<BaseUI.getSize(a);l++)i+=String.format('<li class="text-primary" data-code="{0}" data-name="{1}">{2} {3}</li>',a[l][d],a[l][g],a[l][f],m);i+=String.format('<li data-type="input"><label id="file-upload-container" class="ace-file-input"><input type="file" id="input-file-upload" multiple="multiple" accept="{0}" /><span class="ace-file-container" data-type="button" data-title="Ch\u1ecdn t\u1eadp tin"><span class="ace-file-name" data-type="label" data-title="Ch\u01b0a t\u1eadp tin n\u00e0o \u0111\u01b0\u1ee3c ch\u1ecdn"><i data-type="icon" class="ace-icon fa fa-upload"></i></span></span><a class="remove" href="javascript:;" data-action="remove"><i class="ace-icon fa fa-times"></i></a></label></li>',
h)}else i+=String.format('<li data-type="input" data-code="{0}" data-name="{1}"><label id="file-upload-container" class="ace-file-input"><input type="file" id="input-file-upload" accept="{3}" /><span class="ace-file-container" data-type="button" data-title="Ch\u1ecdn t\u1eadp tin"><span class="ace-file-name" data-type="label" data-title="{2}"><i data-type="icon" class="ace-icon fa fa-upload"></i></span></span><a class="remove" href="javascript:;" data-action="remove"><i class="ace-icon fa fa-times"></i></a></label></li>',
a[0][d],a[0][g],a[0][f],h);else i+=String.format('<li data-type="input"><label id="file-upload-container" class="ace-file-input"><input type="file" id="input-file-upload" '+(e?'multiple="multiple"':"")+' accept="{3}" /><span class="ace-file-container" data-type="button" data-title="Ch\u1ecdn t\u1eadp tin"><span class="ace-file-name" data-type="label" data-title="Ch\u01b0a t\u1eadp tin n\u00e0o \u0111\u01b0\u1ee3c ch\u1ecdn"><i data-type="icon" class="ace-icon fa fa-upload"></i></span></span><a class="remove" href="javascript:;" data-action="remove"><i class="ace-icon fa fa-times"></i></a></label></li>',
"","",h);this.setEl($(String.format("<span>{0}</ul></span>",i)));this.getEl().on("click",'[data-action="delete"]',function(){var j=$(this).parent();b.getGrid().fireAction(b.getEvent(this),{uuid:j.data("code"),name:j.data("name")})});this.getEl().on("click",'[data-action="remove"]',function(){var j=this.getEl().find("#input-file-upload");b.getEl().find(".ace-file-container").attr("data-title","Ch\u1ecdn t\u1eadp tin");b.getEl().find('[data-type="icon"]').removeClass("fa-file").addClass("fa-upload");
j.replaceWith(j.clone(true))});this.getEl().find("#input-file-upload").on("change",function(){b.getEl().find(".ace-file-container").attr("data-title","Thay \u0111\u1ed5i t\u1eadp tin");b.getEl().find('[data-type="icon"]').removeClass("fa-upload").addClass("fa-file");b.setFiles(this.files);k.call(b,this.files)})},setFiles:function(a){this.files=a},getFiles:function(){return this.files},getEvent:function(a){a=$(a);return String.format("{0}_{1}",a.data("action"),a.data("type"))},getValue:function(){return this.getFiles()},
setValue:function(){},applyUI:function(){},focus:function(){}});UI.grid.ColumnManager.registerType("fileUpload",UI.grid.column.InputFileUpload)});
$(function(){BaseUI.ns("UI.grid.column.Label");UI.grid.column.Label=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.Label.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.Label,UI.grid.Editor,{render:function(a){this.setEl($(String.format("<span>{0}</span>",!BaseUI.isEmpty(a)?a:"")));return this.getEl()},edit:function(a){return this.render(a)},getValue:function(){return this.getEl().length>0?this.getEl().html():null},setValue:function(a){this.getEl().html(!BaseUI.isEmpty(a)?
a:"")},focus:function(){this.getRow().find("input:first").focus()}});UI.grid.ColumnManager.registerType("label",UI.grid.column.Label)});
$(function(){BaseUI.ns("UI.grid.column.Select");UI.grid.column.Select=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.Select.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.Select,UI.grid.Editor,{render:function(a){var b=this.getColumn(),c=b.editData||[],e=b.valueField||"value",d=b.displayField||"text",f=BaseUI.isObject(a)?a[d]:"";a=BaseUI.isObject(a)?a[e]:a;for(var g=0;g<c.length;g++){var h=c[g]||{};if(h[e]==a){f=h[d];break}}this.setEl($(String.format("<span>{0}</span>",f||
a)));return this.getEl()},edit:function(a){var b=this.getColumn(),c=b.disabled?'disabled="disabled"':"",e=b.editData||[],d=[],f=b.valueField||"value",g=b.displayField||"text",h=b.emptyString||"----------",k=!BaseUI.isEmpty(b.forceSelection)?b.forceSelection:true,m=BaseUI.isObject(a)?a[g]:"";a=BaseUI.isObject(a)?a[f]:a;var i=null,l=this.getGrid();i=false;k||d.push(String.format('<option value="">{0}</option>',h));for(h=0;h<e.length;h++){var j=e[h]||{};if(j[f]==a){d.push(String.format('<option selected value="{0}">{1}</option>',
j[f],j[g]));i=true}else d.push(String.format('<option value="{0}">{1}</option>',j[f],j[g]))}if(!i&&!BaseUI.isEmpty(a))d.splice(0,0,String.format('<option selected value="{0}">{1}</option>',a,m||a));i=b.type=="select2"?$(String.format('<select {0} data-type="select2" style="width:100%">',c)+d.join()+"<select/>"):$(String.format('<select data-type="select" {0}>',c)+d.join()+"<select/>");i.on("change",function(){l.changeCell(this)}.createDelegate(this));b.type=="select"&&i.on("click",function(){l.clickCell(this)}.createDelegate(this));
this.setEl(i);a=this.applyUI();b.type=="select2"&&a&&a&&a.on("select2-opening",function(){l.clickCell(this)}.createDelegate(this));return this.getEl()},applyUI:function(){var a=this.getColumn()||{};if(a.type=="select2"){if(!this.getEl())throw Error("$cell must not be null");try{if($.fn.select2)return this.getEl().select2(a.getConfig()||{});else console.error("select2 plugin could not be found")}catch(b){throw Error(b.message);}}},getValue:function(){var a=this.getColumn(),b=this.getEl();switch(a.type){case "select":var c=
a.valueField||"value";b=b.val();if(a.dataType=="object")for(var e=a.editData||[],d=0;d<e.length;d++){var f=e[d];if(f[c]==b)b=f}return b;case "select2":if(b.length>0)try{return b.select2("val")}catch(g){throw Error(g.message);}return null}},setValue:function(a){var b=this.getColumn(),c=this.getEl();switch(b.type){case "select":c.find("select").val(a);break;case "select2":c.select2("val",a)}},focus:function(){this.getEl().select2("focus")}});UI.grid.ColumnManager.registerType("select",UI.grid.column.Select);
UI.grid.ColumnManager.registerType("select2",UI.grid.column.Select)});
$(function(){BaseUI.ns("UI.grid.column.Selection");UI.grid.column.Selection=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.Selection.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.Selection,UI.grid.Editor,{render:function(){var a=this.getColumn(),b=a.disabled?'disabled="disabled"':"";this.setEl($(String.format('<label><input {0} type="checkbox" class="ace"/><span class="lbl"></span></label></td>',b)));this.getCell().addClass(a.cls).attr("data-action","select").css("text-align",
a.align||"center");return this.getEl()},edit:function(){this.setEl($('<i class="icon-certificate"></i>'));return this.getEl()}});UI.grid.ColumnManager.registerType("selection",UI.grid.column.Selection)});
$(function(){BaseUI.ns("UI.grid.column.Selectx");UI.grid.column.Selectx=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.Selectx.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.Selectx,UI.grid.Editor,{render:function(a){var b=this.getColumn(),c=b.displayField||"text";if(BaseUI.isObject(a)&&!BaseUI.isArray(a)){a=a[c]||"";this.setEl($(String.format("<span>{0}</span>",a)))}else if(BaseUI.isArray(a)){for(var e=[],d=0;d<a.length;d++){var f=a[d]||{};e.push(f[c])}this.setEl($(String.format("<span>{0}</span>",
e.join(","))))}else this.setEl($(String.format("<span>{0}</span>",a)));return this.getEl()},edit:function(a){var b=this.getColumn(),c=b.disabled?'disabled="disabled"':"",e=b.valueField||"value";if(BaseUI.isObject(a)&&!BaseUI.isArray(a))a=a[e]||"";else if(BaseUI.isArray(a)){for(var d=[],f=0;f<a.length;f++){var g=a[f]||{};d.push(g[e])}a=d.join(",")}else a=a||"";a=$(String.format('<input value="{0}" style="width:100%" data-type="selectx" {1} />',a,c));var h=this.getGrid();a.on("change",function(){h.changeCell(this)}.createDelegate(this));
this.setEl(a);(a=this.applyUI())&&a.on("select2-opening",function(){h.clickCell(this)}.createDelegate(this));return this.getEl()},applyUI:function(){if(!this.getEl())throw Error("$cell must not be null");var a=this.getColumn().getConfig()||{};try{if($.fn.select2)return this.getEl().select2(a);else console.error("select2 plugin could not be found")}catch(b){throw Error(b.message);}},getValue:function(){var a=this.getEl();return a.length>0?a.select2("val"):null},setValue:function(a){var b=this.getEl(),
c=this.getColumn(),e=c.valueField||"value";if(BaseUI.isObject(a)&&!BaseUI.isArray(a))a=a[e]||"";else if(BaseUI.isArray(a)){for(var d=[],f=0;f<a.length;f++){var g=a[f]||{};d.push(g[e])}a=d.join(",")}else a=a||"";b.select2("val",a)},focus:function(){this.getEl().select2("focus")}});UI.grid.ColumnManager.registerType("selectx",UI.grid.column.Selectx)});
$(function(){BaseUI.ns("UI.grid.column.Textbox");UI.grid.column.Textbox=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.Textbox.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.Textbox,UI.grid.Editor,{render:function(a){this.setEl($(String.format("<span>{0}</span>",!BaseUI.isEmpty(a)?a:"")));return this.getEl()},edit:function(a){a=!BaseUI.isEmpty(a)?a:"";var b=this.getColumn(),c=b.align||"left",e=b.disabled?'disabled="disabled"':"";a=$(String.format('<input value="{0}" {1} style="text-align:{2}"/>',
a,e,c));var d=this.getGrid();a.on("keydown",function(f){f=f.keyCode?f.keyCode:f.which;var g=this.getRecordId();if(f==13)d.save(g);else f==27&&d.cancel(g)}.createDelegate(this));a.on("change",function(){d.changeCell(this)}.createDelegate(this));this.setEl(a);return this.getEl()},getValue:function(){var a=this.getEl();return a.length>0?a.val():null},setValue:function(a){this.getEl().val(!BaseUI.isEmpty(a)?a:"")}});UI.grid.ColumnManager.registerType("text",UI.grid.column.Textbox)});
$(function(){BaseUI.ns("UI.grid.column.TypeAhead");UI.grid.column.TypeAhead=function(a){a=a||{};BaseUI.apply(this,a);UI.grid.column.TypeAhead.superclass.constructor.call(this)};BaseUI.extend(UI.grid.column.TypeAhead,UI.grid.Editor,{render:function(a){this.setEl($(String.format("<span>{0}</span>",!BaseUI.isEmpty(a)?a:"")));return this.getEl()},edit:function(a){a=!BaseUI.isEmpty(a)?a:"";var b=this.getColumn(),c=b.align||"left",e=b.disabled?'disabled="disabled"':"",d=$(String.format('<input value="{0}" {1} style="text-align:{2}"/>',
a,e,c)),f=this.getGrid();d.on("keydown",function(g){g=g.keyCode?g.keyCode:g.which;var h=this.getRecordId();if(g==13&&!d.data("typeahead").shown)f.save(h);else g==27&&f.cancel(h)}.createDelegate(this));d.on("change",function(){f.changeCell(this)}.createDelegate(this));this.setEl(d);this.applyUI();return this.getEl()},applyUI:function(){var a=this.getColumn()||{};if(a.type=="typeahead"){if(!this.getEl())throw Error("$cell must not be null");try{if($.fn.typeahead)return this.getEl().typeahead({source:a.editData});
else console.error("Typeahead plugin could not be found")}catch(b){throw Error(b.message);}}},getValue:function(){var a=this.getEl();return a.length>0?a.val():null},setValue:function(a){this.getEl().val(!BaseUI.isEmpty(a)?a:"")}});UI.grid.ColumnManager.registerType("typeahead",UI.grid.column.TypeAhead)});