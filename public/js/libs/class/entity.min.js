/*
 Copyright (c) 2016 CT1905
 Created by Nguyen Ba Chi Cong<nbchicong@gmail.com>
 -------------------------------------------
*/
$(function(){UI.Entity=function(a){BaseUI.apply(this,a||{});this.id=this.id||"content";this.idProperties=this.idProperties||"id";this.entityId=this.entityId||null;this.request=null;this.submitType=this.submitType||"JSON";this.url=this.url||{list:"",create:"",update:"",remove:""};UI.Entity.superclass.constructor.call(this,a||{})};BaseUI.extend(UI.Entity,UI.Clazz,{constructor:UI.Entity,setEntityId:function(a){this.entityId=a},getEntityId:function(){return this.entityId},setParams:function(a){this.params=
a},getParams:function(){return this.params||{}},setSubmitType:function(a){this.submitType=a},getSubmitType:function(){return this.submitType},getIdProperties:function(){return this.idProperties},getAction:function(a){var b=$(a).attr("data-action").split("-"),c="";for(a=0;a<b.length;a++)c+=a==0?b[a]:b[a].capitalize();return c},sendAjax:function(a,b){var c=b||BaseUI.emptyFn;a.success=function(d){c(d)};if(this.getSubmitType()=="JSON"){delete a.dataType;delete a.contentType}return this.request=$.ajax(a)},
load:null,create:function(a){var b=this.getParams(),c=a||BaseUI.emptyFn;BaseUI.isEmpty(b)?console.log("%cParams can not empty when change data","color: #FF0000"):this.sendAjax({url:this.url.create,method:"POST",data:this.getSubmitType()=="JSON_STRING"?JSON.stringify(b):b,dataType:"JSON",contentType:"application/json"},c)},update:function(a){var b=this.getParams(),c=a||BaseUI.emptyFn;BaseUI.isEmpty(b)?console.log("%cParams can not empty when change data","color: #FF0000"):this.sendAjax({url:this.url.update,
method:"POST",data:this.getSubmitType()=="JSON_STRING"?JSON.stringify(b):b,dataType:"JSON",contentType:"application/json"},c)},remove:function(a){var b=this.getParams(),c=a||BaseUI.emptyFn;BaseUI.isEmpty(b)?console.log("%cParams can not empty when change data","color: #FF0000"):this.sendAjax({url:this.url.remove,method:"POST",data:this.getSubmitType()=="JSON_STRING"?JSON.stringify(b):b,dataType:"JSON",contentType:"application/json"},c)},uploadFile:function(a,b){for(var c=new FormData,d=a||[],g=b||
function(){},e=0;e<d.length;e++){var f=d[e];c.append("name",f.name);c.append("file",f)}$.ajax({url:this.url.upload,method:"POST",data:c,dataType:"JSON",processData:false,contentType:false,cache:false,success:function(h){g(h)}})}})});